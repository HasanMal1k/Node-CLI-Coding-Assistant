

----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [cli-interface.js] -----

import figlet from "figlet";
import gradient, { teen } from "gradient-string";
import inquirer from "inquirer";
import ora from "ora";
import chalk from "chalk";
import { sendMessage, socket } from './client-server.js'
import readAllFiles from "./readAndCompress.js";

const sleep = (ms = 2000) => new Promise((r) => setTimeout(r, ms));

let isLLMReady = false;
let isProcessingUpload = false;

// Handle different socket events
socket.on('stream_chunk', (chunk) => {
    if(chunk.error){
        console.log(chalk.red.bold("\n CLI detected error:"), chalk.red(chunk.error))
        return
    }
    if(chunk.isComplete){
        console.log(chalk.green.bold("\n Response finished!"))
    } else {
        process.stdout.write(chalk.blueBright(chunk.data))  
    }
})

// For when files are uploaded
socket.on('llm-ready', (data) => {
    isLLMReady = true;
    console.log(chalk.green.bold("\n Success:"), chalk.cyan(data.message));
})

// To check if code files are given as context or no
socket.on('connection-status', (status) => {
    isLLMReady = status.hasCodeFile;
    if (!isLLMReady) {
        console.log(chalk.cyan.bold("\n Status:"), chalk.cyan(status.message));
    }
})

const startApp = async () => {
    console.clear()
    
    const spinner = ora(chalk.cyan('Loading Vita...')).start();
    await sleep(2000);
    spinner.stop();

    figlet('Vita Is Here', async (err, data) => {
        if (err) {
            console.log(chalk.red.bold('Something went wrong'));
            console.log(chalk.red(err));
            return;
        }

        console.clear();
        console.log(teen(data));
        
        console.log(chalk.cyan('\n Any broken code for me to fix ??'));
        console.log(chalk.cyan('Let\'s get started with your code analysis journey!\n'));
        
        await sleep(1000);

        // Main application loop
        while (true) {
            try {
                
                const choices = isLLMReady 
                    ? [
                        chalk.cyan('Ask a question about your code'),
                        chalk.cyan('Upload new code files'), 
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ]
                    : [
                        chalk.cyan('Upload code files (Required first step)'),
                        chalk.cyan('Check status'),
                        chalk.red('Quit')
                      ];

                const { action } = await inquirer.prompt([
                    {
                        type: 'list',
                        name: 'action',
                        message: chalk.cyan('What would you like to do?'),
                        choices: choices,
                        prefix: chalk.cyan('>')
                    }
                ]);

                if (action.includes('Quit')) {
                    console.log(chalk.cyan('Thank you for using Vita! Goodbye!'));
                    process.exit(0);
                }

                if (action.includes('Check status')) {
                    if (isLLMReady) {
                        console.log(chalk.green.bold('Status:'), chalk.cyan('LLM is ready! Your code files are loaded.'));
                    } else {
                        console.log(chalk.cyan.bold('Status:'), chalk.cyan('Waiting for code files to be uploaded.'));
                    }
                    continue;
                }

                if (action.includes('Upload')) {
                    await handleCodeUpload();
                    continue;
                }

                if (action.includes('Ask a question')) {
                    await handleChatMode();
                    continue;
                }

            } catch (error) {
                console.error(chalk.red.bold('An error occurred:'), chalk.red(error.message));
                await sleep(1000);
            }
        }
    });
};

const handleCodeUpload = async () => {
    if (isProcessingUpload) {
        console.log(chalk.cyan('Upload already in progress...'));
        return;
    }

    console.log(chalk.cyan('\nPreparing to upload your code files...'));
    
    const { confirm } = await inquirer.prompt([
        {
            type: 'confirm',
            name: 'confirm',
            message: chalk.cyan('This will scan your current directory and upload all code files. Continue?'),
            default: true,
            prefix: chalk.cyan('?')
        }
    ]);

    if (!confirm) {
        console.log(chalk.cyan('Upload cancelled.'));
        return;
    }

    isProcessingUpload = true;
    const uploadSpinner = ora({
        text: chalk.cyan('Reading and compressing code files...'),
        color: 'cyan',
        spinner: 'dots12'
    }).start();

    try {
        await readAllFiles(process.cwd());
        uploadSpinner.succeed(chalk.green.bold('Code files uploaded successfully!'));
        console.log(chalk.cyan('LLM is processing your code...'));
        
    } catch (error) {
        uploadSpinner.fail(chalk.red.bold('Failed to upload code files'));
        console.error(chalk.red('Error:'), chalk.red(error.message));
    } finally {
        isProcessingUpload = false;
    }
};

const handleChatMode = async () => {
    if (!isLLMReady) {
        console.log(chalk.red.bold('Please upload code files first!'));
        return;
    }

    console.log(chalk.cyan('Entering Chat Mode...'));
    console.log(chalk.cyan.bold('Chat Mode'), chalk.cyan('- Ask questions about your code'));
    console.log(chalk.cyan('Type "back" to return to menu\n'));

    while (true) {
        const { query } = await inquirer.prompt([
            {
                type: 'input',
                name: 'query',
                message: chalk.cyan('Your question:'),
                prefix: chalk.cyan('>'),
                validate: (input) => {
                    if (!input.trim()) {
                        return chalk.red('Please enter a question.');
                    }
                    return true;
                },
                transformer: (input) => {
                    return chalk.cyan(input);
                }
            }
        ]);

        if (query.toLowerCase().trim() === 'back') {
            console.log(chalk.cyan('Returning to main menu...\n'));
            break;
        }

        console.log(chalk.cyan('Vita is thinking...\n'));
        sendMessage(query);
        
        // Wait for response to complete before allowing next question
        await new Promise((resolve) => {
            const responseHandler = (chunk) => {
                if (chunk.isComplete || chunk.error) {
                    socket.off('stream_chunk', responseHandler);
                    resolve();
                }
            };
            socket.on('stream_chunk', responseHandler);
        });

        console.log(chalk.cyan('\n' + 'â”€'.repeat(60) + '\n'));
    }
};

// Handle Ctrl+C gracefully
process.on('SIGINT', () => {
    console.log(chalk.cyan('\n\nDetected Ctrl+C, exiting gracefully...'));
    process.exit(0);
});

// Handle uncaught errors
process.on('uncaughtException', (error) => {
    console.error(chalk.red.bold('\nUnexpected error:'), chalk.red(error.message));
    process.exit(1);
});

startApp();

----- [client-server.js] -----

// Client Server
import express from 'express'
import { io as Client } from 'socket.io-client'

const app = express()

export const socket = Client('http://localhost:8080')

socket.on('connect', () => {
    console.log('ðŸ”— Connected to LLM server') 
})

socket.on('disconnect', () => {
    console.log('ðŸ”Œ Disconnected from LLM server')
})

socket.on('connect_error', (error) => {
    console.error('âŒ Connection failed:', error.message)
})

// Send message to LLM
export const sendMessage = (message) => {
    socket.emit('message', message)
}

----- [codeFiles.txt] -----



----- [codeFiles.txt.br] -----

[ï¿½E)'ï¿½ï¿½ï¿½ï¿½ï¿½bDrÒš5@ï¿½ï¿½0Xï¿½
ï¿½$ï¿½Gg!ï¿½_ï¿½/1ï¿½Ý¹	ï¿½ï¿½yï¿½ï¿½#ï¿½%ï¿½ï¿½ï¿½ï¿½Cï¿½@qï¿½Iï¿½ï¿½$G8æ¤‰Ï–sï¿½(ï¿½kï¿½Gï¿½ï¿½ï¿½Fï¿½ï¿½ï¿½ï¿½<ï¿½ï¿½<ï¿½ï¿½Û`ï¿½Y#ï¿½ï¿½ï¿½ï¿½?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½p 'ï¿½ï¿½rï¿½mJ>xï¿½ï¿½ï¿½ï¿½ï¿½Xï¿½ï¿½ï¿½ï¿½Bï¿½ï¿½nJEE	ï¿½ï¿½F1Dï¿½(ï¿½ï¿½Lï¿½dï¿½g^;ï¿½ï¿½>ï¿½ï¿½Æ¾ï¿½ï¿½[?ï¿½ï¿½ï¿½gï¿½ï¿½ï¿½ï¿½Nï¿½$ï¿½ï¿½?ï¿½}ï¿½ï¿½ï¿½ï¿½*ï¿½ï¿½Hï¿½1ï¿½Ö¼ï¿½Uï¿½ï¿½ï¿½?ï¿½ï¿½ ï¿½ï¿½ï¿½ï¿½pï¿½226ï¿½dï¿½ï¿½Vï¿½g|ï¿½Pï¿½Éº$Sï¿½~ï¿½Uï¿½}ï¿½jnï¿½ï¿½ï¿½,ï¿½ï¿½0\RuÝ”kï¿½@ï¿½ï¿½Uï¿½ZEÈ†#7ï¿½ï¿½]ï¿½D>ï¿½HYï¿½*ï¿½ÈŸï¿½ï¿½ï¿½ï¿½9Sï¿½ï¿½4ï¿½ï¿½ï¿½"Iï¿½pï¿½Pï¿½ï¿½<ï¿½1ï¿½eï¿½yï¿½ï¿½ï¿½2ï¿½Zï¿½ï¿½ï¿½ï¿½ï¿½ï¿½kï¿½CTNIï¿½ï¿½,ï¿½ï¿½Vpï¿½oï¿½liqï¿½,}ï¿½	ï¿½Iï¿½:ï¿½6Dï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½Oï¿½Y{Eï¿½+ï¿½ï¿½.Î„ï¿½ï¿½ï¿½|ï¿½jï¿½Ì™4ï¿½Æ¤k<1ï¿½ï¿½ï¿½Mï¿½ï¿½ï¿½ï¿½ï¿½Vnï¿½4dï¿½Ñ´5wï¿½ï¿½ï¿½ï¿½ï¿½4ï¿½`Rï¿½ï¿½ï¿½<ï¿½&ï¿½ORï¿½ï¿½ï¿½sï¿½y_+Tï¿½{ï¿½ï¿½y7ï¿½ï¿½ï¿½ï¿½Iï¿½gï¿½QUï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Yzï¿½Eï¿½2yï¿½VAï¿½ï¿½|
ï¿½-P;ï¿½ï¿½Uï¿½hCï¿½ï¿½ï¿½qï¿½&Ãºï¿½sgï¿½ï¿½Oï¿½ï¿½bï¿½4ï¿½ï¿½Wï¿½ï¿½cï¿½ï¿½uï¿½ï¿½ï¿½ï¿½ï¿½fpnï¿½/ï¿½}W_Jï¿½ï¿½\ï¿½ï¿½ï¿½ï¿½Nï¿½ï¿½,9ï¿½ï¿½t	ï¿½ï¿½gKï¿½ï¿½ï¿½6|LIV,jJï¿½ï¿½ï¿½*ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½.|Gï¿½ï¿½k=B<ï¿½.ï¿½Sï¿½ï¿½oï¿½#ï¿½:ï¿½ï¿½8ï¿½ï¿½Ò„ï¿½ï¿½ï¿½ï¿½ï¿½:Mï¿½ï¿½kËŠ>5lï¿½ï¿½ï¿½"ï¿½ï¿½ï¿½Aï¿½Fï¿½htÚ¹l<ï¿½&ï¿½-"#5ÍRs\ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Bdï¿½ï¿½ï¿½&Tï¿½ï¿½?ï¿½Uï¿½×ª#ã„Šï¿½ï¿½(ï¿½sï¿½Cï¿½ï¿½ï¿½	ï¿½=ï¿½Kbï¿½ï¿½ï¿½ï¿½{ï¿½gï¿½(ï¿½ï¿½*ï¿½.ï¿½ï¿½7ï¿½ï¿½O"ï¿½ ï¿½ï¿½tfOï¿½.ï¿½<R1\ï¿½)sï¿½ï¿½?ï¿½IGï¿½yB:ï¿½^Ý¨^ï¿½ï¿½s_/Óˆï¿½ï¿½tï¿½Cï¿½Qï¿½~#ï¿½ï¿½ï¿½.ï¿½ï¿½PBï¿½ï¿½Bhï¿½ï¿½ï¿½Eï¿½ï¿½3qï¿½ï¿½ï¿½)ï¿½Eï¿½+ï¿½vC{ï¿½Ü¥ï¿½6'7Sï¿½Jmï¿½q*42Y\ï¿½ï¿½lï¿½ï¿½o'QJï¿½ï¿½ï¿½/ï¿½Êžï¿½
ï¿½Aï¿½Y.ï¿½ï¿½ï¿½ï¿½ï¿½Ocn)ZÖ2?nêš€{&.cï¿½Ãƒexï¿½ï¿½=	ï¿½Pmï¿½ï¿½Cjï¿½ï¿½3ß±ï¿½{ï¿½	ï¿½ï¿½Raï¿½k
Ø˜Ö ï¿½ï¿½ï¿½ï¿½rï¿½rMÑ³ï¿½ï¿½yÉ¿ï¿½ï¿½
nï¿½xÙ¯)QUï¿½X ï¿½ ]ï¿½ï¿½ï¿½ï¿½ï¿½hvï¿½,ï¿½O,Û—Íï¿½|Í±ï¿½ï¿½:ï¿½kï¿½ï¿½ï¿½n&ï¿½ï¿½9F"ï¿½ï¿½JOX^ï¿½ï¿½<ï¿½ï¿½+"tï¿½Mï¿½ï¿½Kï¿½Pï¿½1Jï¿½ï¿½09ï¿½ï¿½L)Pï¿½x.Pï¿½8ï¿½}[1ï¿½NKï¿½!ï¿½BUï¿½C~ï¿½ï¿½ï¿½[v|@
ï¿½Lï¿½ï¿½Mï¿½ï¿½qï¿½!2.)a=dï¿½8ï¿½iï¿½vï¿½Mï¿½ï¿½ï¿½Zï¿½ï¿½`",]ï¿½	L`;ï¿½*#Ó‡$ï¿½ï¿½bBï¿½ï¿½Eï¿½dï¿½ï¿½ï¿½Mï¿½|ï¿½ï¿½ï¿½%Ì´3v1lï¿½ï¿½6ï¿½ï¿½;ï¿½ï¿½ï¿½Å£ï¿½[0ï¿½ï¿½&ï¿½,6ï¿½ï¿½à¡šï¿½:ï¿½ÙÒZï¿½2e ï¿½g&ï¿½ï¿½ï¿½ï¿½ï¿½>Cï¿½ï¿½tï¿½gCf ï¿½H@ï¿½ï¿½ï¿½!]ï¿½ï¿½ï¿½ï¿½uï¿½O|ï¿½cï¿½ï¿½ï¿½ï¿½ï¿½>ebï¿½ï¿½h1,#eï¿½oe6Zzeï¿½"ï¿½oQ2ï¿½NBï¿½ï¿½ï¿½46ï¿½b)ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Rï¿½ ï¿½ï¿½7Aï¿½"ï¿½x?ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½2v9AP;ï¿½[ï¿½ï¿½&Bï¿½ï¿½ï¿½Eï¿½Õ•+:ï¿½ï¿½}ï¿½ï¿½ï¿½ï¿½,]ï¿½
ï¿½ï¿½ pï¿½JP)fï¿½ï¿½"ï¿½ic]ï¿½ï¿½ï¿½ï¿½_ï¿½Xï¿½Å#ï¿½X+Eï¿½ï¿½#mM}ï¿½ï¿½ï¿½`ï¿½ ï¿½ï¿½ï¿½:Tï¿½ï¿½5-ï¿½IÔ W<ï¿½ï¿½vï¿½dÊ¨awï¿½V%2ï¿½ï¿½Pt%ï¿½ï¿½PPï¿½[ï¿½-ï¿½ã²Iï¿½!Hï¿½ ï¿½sï¿½ï¿½z9tï¿½H[; ï¿½ï¿½ï¿½ï¿½ï¿½7u;bï¿½ä¤´ï¿½ï¿½?Xr#ï¿½d0ï¿½8eï¿½ÑŽ=Jï¿½!Zï¿½G:Ó”ï¿½ï¿½G[ï¿½iï¿½ï¿½ï¿½ï¿½!uï¿½ï¿½ï¿½NÙ”ï¿½fï¿½ï¿½^æ™¯ï¿½ï¿½o4ï¿½ï¿½kï¿½Â¾N74ï¿½|ï¿½
ï¿½Cï¿½ï¿½qï¿½"ï¿½ï¿½ï¿½ï¿½ce>ï¿½>vGï¿½ï¿½ï¿½ï¿½"ï¿½ï¿½lLï¿½gï¿½A ï¿½8ï¿½2\ï¿½ï¿½T3yNï¿½ï¿½kA)0Ã•8Wï¿½Fï¿½ï¿½ï¿½ï¿½w*ï¿½~Nï¿½ï¿½mvï¿½uï¿½)ï¿½
1bfï¿½Ù³)ï¿½ï¿½ï¿½z^ï¿½9-ï¿½N!ï¿½^ï¿½tï¿½ï¿½Kï¿½ï¿½ï¿½kï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Âï¿½ï¿½zVï¿½|FÂšQï¿½ï¿½ï¿½ï¿½9ï¿½G.ï¿½iï¿½Cï¿½v +Æ¶ï¿½Cï¿½ï¿½ï¿½ï¿½huï¿½)ï¿½,qï¿½Ù17Xï¿½ï¿½ï¿½ V]ï¿½Xï¿½4ï¿½ï¿½})ï¿½2#ï¿½.2iï¿½Tï¿½ï¿½*ï¿½ï¿½'ï¿½8bp2ï¿½Aï¿½ï¿½ï¿½ËŽ}O7cf~ ï¿½:
Kmï¿½y< ï¿½ï¿½ï¿½atI-.z*ï¿½Kï¿½'ï¿½ï¿½ï¿½8ï¿½9ï¿½ï¿½nï¿½Xï¿½ï¿½iï¿½ï¿½TOï¿½ï¿½Iï¿½ï¿½Vï¿½+ï¿½Nï¿½ï¿½9G5ï¿½r|3Ô†O<ï¿½R5ï¿½dDÑ ï¿½Ã¥ï¿½-)ï¿½ï¿½1ï¿½ï¿½ï¿½ï¿½Vï¿½ï¿½Rï¿½7ï¿½vï¿½ï¿½Å¢o9ï¿½ï¿½*ï¿½ï¿½ï¿½(XJaGï¿½Þï¿½ï¿½ï¿½ï¿½atï¿½5fï¿½ï¿½$ï¿½5ï¿½ï¿½ï¿½ï¿½gXï¿½Äª]ï¿½ï¿½ï¿½ï¿½*cï¿½]ì¡…ï¿½ï¿½<ï¿½ï¿½|ï¿½ï¿½ï¿½ï¿½(ï¿½?niNKqkï¿½fï¿½ï¿½ï¿½Jï¿½ï¿½ï¿½C-ï¿½:ï¿½ï¿½Uï¿½ï¿½\ï¿½ï¿½ï¿½RsZ
V`ï¿½)Ù¤Dï¿½!Cxsï¿½`rï¿½ï¿½sOï¿½ï¿½ï¿½ï¿½=oW{=xï¿½su ï¿½ï¿½ï¿½E6ï¿½lTï¿½ï¿½>ï¿½tÑ¸ï¿½ï¿½[6ï¿½Lgï¿½ï¿½Zï¿½Eï¿½ï¿½ï¿½ï¿½}3ï¿½/ï¿½fï¿½d2ï¿½Kï¿½ï¿½ï¿½uï¿½ï¿½IDï¿½nYï¿½	ï¿½dï¿½Pï¿½ï¿½ï¿½ï¿½ï¿½Zï¿½YÈ¬Hï¿½cï¿½ï¿½ï¿½a=ï¿½ï¿½{Æ•Sï¿½7Nï¿½ï¿½6*ï¿½ï¿½Eï¿½ï¿½T~ï¿½=7[ï¿½ï¿½ï¿½ï¿½^	b,ï¿½-ï¿½mï¿½xDï¿½msï¿½ï¿½0ï¿½-~}ï¿½B;ï¿½lXï¿½!ï¿½ï¿½ï¿½Õ­:ï¿½#+ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½	KLseï¿½ï¿½ lï¿½ ï¿½5ï¿½ï¿½ %ï¿½}ï¿½!kf8ï¿½ï¿½ï¿½jï¿½ï¿½tï¿½gï¿½}pï¿½=ï¿½+ï¿½ï¿½=Bï¿½,ï¿½Tï¿½Qï¿½Oï¿½ï¿½ï¿½}ï¿½uï¿½Mï¿½Íï¿½@ï¿½^.dYhï¿½ï¿½ï¿½ï¿½iï¿½ï¿½xÑ¬ciï¿½ï¿½.Û¶Xï¿½ï¿½~paï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½`ï¿½7ScMï¿½1Í™,ï¿½ï¿½ï¿½ï¿½ï¿½Xï¿½f}nzï¿½ï¿½ï¿½ï¿½Pï¿½ï¿½ï¿½wï¿½ï¿½ï¿½\ï¿½ï¿½ï¿½zï¿½,yï¿½yï¿½ï¿½ï¿½%ï¿½/Yï¿½ï¿½D@.gIï¿½ï¿½ï¿½7ï¿½R9ï¿½B9/~ï¿½%)Zï¿½< ï¿½Í¢ï¿½)ï¿½'Gï¿½2ï¿½#ï¿½$Nï¿½ï¿½ï¿½mï¿½o]" ï¿½Q2Ezï¿½
Qyï¿½^XSï¿½(8st ï¿½[BH7ï¿½ï¿½aofHï¿½8	9ï¿½ï¿½ï¿½]yz	2}ï¿½Oï¿½ï¿½TJ2DHOï¿½ï¿½ï¿½ï¿½Oï¿½eï¿½F3!DQLQuBÊ‚bï¿½ï¿½Eï¿½ï¿½ï¿½<ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½	ï¿½ï¿½fBï¿½	1ï¿½ï¿½ï¿½Ò«i.Bï¿½ï¿½a;ï¿½ï¿½#ï¿½|ï¿½m$ï¿½ï¿½e.Aï¿½Iï¿½ï¿½-ï¿½ï¿½ï¿½ï¿½>ï¿½&ï¿½ï¿½È£ï¿½ï¿½ï¿½Ô’ï¿½tBdï¿½ï¿½uï¿½ï¿½{6Oï¿½Oï¿½<dï¿½ï¿½ï¿½gï¿½ï¿½!ï¿½3D?Fi&ï¿½dï¿½ï¿½Éµ ï¿½ï¿½!ï¿½.Dvï¿½krï¿½FNÉ¿vï¿½nï¿½Nï¿½Ý‡ï¿½g~ï¿½Bv*ï¿½!ï¿½ï¿½ï¿½
yï¿½~Gï¿½iBHVHï¿½ï¿½xÕžï¿½ï¿½ï¿½^BVï¿½rï¿½ï¿½G!#dmUMï¿½Ë„ï¿½Hï¿½ï¿½ï¿½}ï¿½?|ï¿½_ï¿½kRï¿½ï¿½2NHï¿½ï¿½ï¿½ï¿½Yï¿½ï¿½$Wï¿½Bï¿½Hbï¿½ï¿½ï¿½ï¿½ï¿½bï¿½hï¿½Hï¿½Â¾ï¿½Nï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ND=@^\ ï¿½!ï¿½ï¿½KFahï¿½ï¿½Hï¿½jï¿½I%ï¿½!ï¿½h	qï¿½'fWIï¿½{ï¿½Tï¿½/ï¿½	ï¿½ï¿½Cï¿½ï¿½ï¿½ï¿½ï¿½frï¿½<Iï¿½qï¿½ï¿½ï¿½uï¿½-9RAï¿½3ï¿½Zï¿½ï¿½1!C.BÈ²oï¿½ï¿½ï¿½1ï¿½ï¿½ï¿½Gï¿½ï¿½(Hï¿½ï¿½ï¿½&ï¿½ï¿½ï¿½ï¿½vï¿½ï¿½ï¿½ï¿½)Bï¿½ï¿½ ï¿½tï¿½ï¿½JymPï¿½Tï¿½ï¿½6|Vm&5ï¿½ï¿½4ï¿½ï¿½Ovï¿½ï¿½ï¿½-ï¿½Tï¿½ï¿½3|ï¿½Aï¿½DIï¿½ï¿½4wRKï¿½C&ï¿½`Mï¿½uï¿½o'Äœ$QBï¿½	ï¿½Ù‘ï¿½B^lBï¿½ï¿½ï¿½ï¿½ï¿½ï¿½*H!ï¿½5ï¿½ï¿½]ï¿½Y>N*È“3BHi!ï¿½ï¿½É»ï¿½ï¿½ï¿½Bï¿½*ï¿½ï¿½Iï¿½ï¿½Bï¿½ï¿½6ï¿½Mï¿½ekf#ï¿½ï¿½ï¿½ï¿½:	ï¿½Ò“iï¿½ï¿½'ï¿½rE!ï¿½ï¿½Xï¿½fBï¿½lï¿½ï¿½ï¿½ï¿½ï¿½ï¿½zï¿½kï¿½ï¿½$ï¿½Bï¿½ï¿½ï¿½É¶#ï¿½wï¿½ï¿½Ë²]ï¿½ï¿½[wï¿½P^ï¿½=ï¿½iï¿½H"ï¿½yï¿½%ï¿½ÝŸ#ï¿½/oï¿½ï¿½%hï¿½ï¿½ï¿½ï¿½ï¿½]ï¿½	!ï¿½WgJÃ„ï¿½ï¿½*'ï¿½$.BH)i#ï¿½ï¿½uBï¿½ï¿½ï¿½
!62Kï¿½ï¿½<(ï¿½ï¿½ï¿½/Gï¿½ï¿½ï¿½Bï¿½ï¿½%dW:ï¿½Ä­	ï¿½ï¿½&ï¿½ï¿½ï¿½É‹	%ï¿½ï¿½ï¿½ï¿½ï¿½>më¨“ï¿½ï¿½vIFï¿½ï¿½ï¿½*ï¿½^ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½RX~qFpï¿½ï¿½ï¿½ï¿½_ï¿½Gï¿½ï¿½#ï¿½(5ï¿½ï¿½mï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½;Oï¿½"ï¿½ï¿½ï¿½ï¿½Pï¿½ï¿½ï¿½ï¿½]ï¿½Qï¿½ï¿½#ï¿½Uï¿½pï¿½ï¿½vï¿½,Wï¿½ï¿½ï¿½*ï¿½wï¿½ï¿½ï¿½$ï¿½?ï¿½66ï¿½|X#]ï¿½ï¿½LHHEï¿½-ï¿½ï¿½ï¿½ï¿½Zï¿½ï¿½ï¿½&ï¿½Å³ï¿½miï¿½%ï¿½f<ï¿½ï¿½ÚŸï¿½Dï¿½ï¿½ï¿½ï¿½Fï¿½ï¿½ï¿½ï¿½ß‡PDï¿½Dã²†ï¿½Gï¿½Br9.ï¿½ï¿½-&yb&:yï¿½!ï¿½qÜ™ï¿½ï¿½$ï¿½Tï¿½ï¿½ï¿½%^gï¿½j7pï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,!ï¿½ï¿½.ï¿½1n\ï¿½ï¿½#ï¿½ï¿½.ï¿½bwï¿½È©zP8Gï¿½ 2ï¿½C4& ï¿½h3ï¿½*YÛ‹ï¿½.g*ï¿½ï¿½?4ï¿½#ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½*ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½jï¿½ï¿½ï¿½ï¿½>ï¿½$dï¿½ï¿½ï¿½ï¿½ï¿½}ï¿½\ï¿½ï¿½ï¿½ï¿½"6;ï¿½DWuÓŸlï¿½9ï¿½ï¿½@.wï¿½|6ï¿½Tpï¿½xï¿½ï¿½ï¿½Þ¢wï¿½VDKHï¿½Td
ï¿½.B^ï¿½%ï¿½4^Iï¿½ï¿½yr"d>+ï¿½ï¿½!ï¿½Rï¿½9Fï¿½Dï¿½2ï¿½(ï¿½49ï¿½ï¿½lï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Oï¿½$ï¿½ï¿½cÓ¬}ï¿½ï¿½#]}ï¿½t02ï¿½ï¿½ï¿½sï¿½ï¿½nï¿½ï¿½Nï¿½ï¿½tï¿½ï¿½ï¿½Zï¿½8ï¿½"JÐžï¿½/'wIï¿½Ý’ qï¿½%Oï¿½@Ò‡;4xPï¿½Nï¿½3ï¿½ï¿½ERkï¿½-ï¿½`ï¿½$*fï¿½ï¿½ï¿½ï¿½ï¿½w]K?ï¿½ï¿½+#ï¿½mï¿½lï¿½ï¿½Ò±Iï¿½ï¿½l/:ï¿½DBï¿½ï¿½nï¿½ï¿½aï¿½ï¿½|{ï¿½2ï¿½.gï¿½Eï¿½ï¿½3ï¿½ï¿½mYï¿½ï¿½&"ï¿½ï¿½Bï¿½Ì»ï¿½Æœï¿½eÛ½=|ï¿½ï¿½Hr%ï¿½ï¿½HÄ“ï¿½Zï¿½ï¿½ï¿½9ï¿½ï¿½ ï¿½ï¿½É¬xï¿½;6ï¿½ï¿½ï¿½ï¿½xï¿½'ï¿½ï¿½?ï¿½Grï¿½ï¿½ï¿½ï¿½Imï¿½Dï¿½×•ï¿½ÂµEï¿½_qCï¿½?Lï¿½ï¿½ï¿½ï¿½,4ï¿½UÂŸï¿½ï¿½ï¿½ï¿½q'	ï¿½;5ï¿½eï¿½ï¿½ï¿½ï¿½Q@ï¿½Y"ï¿½ï¿½ï¿½ï¿½ï¿½!Wï¿½-ï¿½Oï¿½y!ï¿½-ï¿½dï¿½ï¿½Íï¿½Oï¿½nï¿½r3ï¿½iï¿½ï¿½db%ï¿½ï¿½ï¿½ ï¿½iï¿½ï¿½ï¿½Q2ï¿½ï¿½+ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½dï¿½IEï¿½[ï¿½ï¿½ï¿½ï¿½ï¿½sÐ¼$ï¿½*}sï¿½ï¿½Sw'ï¿½rOï¿½Fï¿½Ç™#rï¿½0DH_ï¿½/ï¿½ï¿½ï¿½#c6ï¿½)ï¿½Wï¿½oWï¿½5ï¿½ï¾‘wKï¿½ï¿½ï¿½ Iï¿½6ï¿½tï¿½4ï¿½Cï¿½ï¿½1Õ“bï¿½ï¿½ï¿½uï¿½ï¿½ï¿½ï¿½nï¿½ï¿½ï¿½ï¿½BVBï¿½XD^B$ï¿½ï¿½9!ï¿½6Dtï¿½×›ï¿½ï¿½ï¿½
ï¿½&7Hï¿½odß¶RDï¿½Hw9ï¿½ï¿½ï¿½dï¿½ï¿½ï¿½)ï¿½ï¿½j59'ï¿½KHï¿½ï¿½D	ï¿½ï¿½ï¿½;ï¿½+#	Ù§}ï¿½ï¿½tï¿½ï¿½ï¿½ï¿½}cï¿½ï¿½E~ï¿½lï¿½/Do ï¿½ï¿½ï¿½ï¿½Jï¿½ï¿½ï¿½ï¿½ï¿½bï¿½ï¿½ï¿½ï¿½ÜŠ'ï¿½ï¿½@ï¿½ï¿½Nï¿½gï¿½ï¿½ï¿½ï¿½ï¿½ ï¿½Cï¿½ï¿½ï¿½Oï¿½Bï¿½&ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½GÈ¼ï¿½e/n'%ï¿½Kï¿½ï¿½ï¿½ï¿½ï¿½gï¿½ï¿½ySï¿½aï¿½ï¿½ï¿½ï¿½ï¿½C2dï¿½eHYï¿½ï¿½ï¿½ï¿½]ï¿½ï¿½Cï¿½~ï¿½Bï¿½ï¿½&=Go tï¿½ï¿½{'ï¿½ç•µï¿½ò¶9ï¿½3ï¿½a&nQmï¿½A>ï¿½Pï¿½Í´}`LkVï¿½a2ï¿½W9$ï¿½ï¿½Q9ï¿½%ï¿½Bï¿½Ù“"ï¿½ï¿½ï¿½trï¿½HXï¿½ï¿½+ï¿½sï¿½Lï¿½$~Dlï¿½ï¿½ï¿½Dyï¿½"ï¿½ï¿½|ï¿½}wï¿½n#5ï¿½Rï¿½p?Bï¿½ï¿½^4ï¿½ï¿½ï¿½|:ï¿½ï¿½w%3ï¿½ï¿½ï¿½ï¿½Ð¶Vï¿½:ï¿½ï¿½uï¿½ï¿½ï¿½Uï¿½ yï¿½$ï¿½Wï¿½Yï¿½ï¿½ï¿½ï¿½|ï¿½&ï¿½ï¿½Jï¿½	ï¿½"dï¿½ï¿½y	i%
ï¿½&ï¿½ï¿½I|Dï¿½9ï¿½zï¿½`ï¿½ï¿½Eï¿½ï¿½>ï¿½8ï¿½^Hlï¿½ï¿½ï¿½`#ï¿½ iï¿½ï¿½ï¿½"ï¿½4ï¿½Eï¿½Xï¿½rï¿½Iï¿½ï¿½ï¿½Lï¿½ï¿½{ï¿½ï¿½ï¿½f}ï¿½Tí‹‘"ï¿½ï¿½ï¿½Iï¿½ï¿½>ï¿½ï¿½ï¿½é¿žï¿½ï¿½ï¿½×ï¿½eï¿½È…ï¿½9ï¿½ï¿½ï¿½(Æ².ï¿½gï¿½ï¿½ï¿½ï¿½ï¿½ï¿½VJ(Gï¿½Oj
1ï¿½#%+3ï¿½ï¿½ï¿½(ï¿½0ï¿½Õ¨b@(y9#ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½.ï¿½Lzu.ï¿½ï¿½ï¿½Eï¿½ï¿½ï¿½Yv[%k
ï¿½Iï¿½ï¿½gï¿½ï¿½?fï¿½Oï¿½ï¿½rï¿½#ï¿½Xï¿½-> ï¿½:9PÉ(ï¿½!`ï¿½ËŒï¿½ï¿½ï¿½Aï¿½!Uï¿½ï¿½ITï¿½ï¿½ï¿½!ï¿½=7ï¿½ï¿½*ï¿½a3îž©ï¿½ï¿½'ï¿½ï¿½db ï¿½È°ï¿½Zï¿½ï¿½ï¿½ï¿½ï¿½cï¿½Dï¿½6ï¿½kGJï¿½ï¿½"ï¿½,3ï¿½p<ï¿½EPï¿½u0ï¿½ï¿½ï¿½ï¿½Þ¢ZYï¿½lB#ï¿½lgï¿½ï¿½SÏ»ï¿½MCï¿½ï¿½ï¿½0ï¿½ï¿½mï¿½ï¿½=ï¿½ï¿½ï¿½ï¿½&ï¿½É¦ï¿½ï¿½o!ï¿½ï¿½i!ï¿½ï¿½Fï¿½	ï¿½ï¿½O-ï¿½Nï¿½
ï¿½^Fï¿½(ï¿½>DGï¿½wï¿½ï¿½V!jï¿½ï¿½gï¿½Qn:Gï¿½$ï¿½ï¿½ï¿½ï¿½iï¿½ï¿½ï¿½ï¿½&ï¿½qIï¿½PA,ï¿½.ï¿½Ã‡ï¿½ï¿½ï¿½ï¿½?{ï¿½ï¿½ZhHï¿½Â•/ï¿½dï¿½ï¿½ï¿½Yï¿½ï¿½21q:ï¿½ï¿½ï¿½0(ï¿½ï¿½Û­ï¿½eï¿½ï¿½ï¿½ï¿½ï¿½ï¿½zï¿½ï¿½ï¿½"*ï¿½ÂÕ´ï¿½Jï¿½GLï¿½ï¿½ï¿½ï¿½{ï¿½Eï¿½>ï¿½'H+Iï¿½ï¿½ï¿½ï¿½ï¿½luï¿½8Oï¿½ï¿½ï¿½ï¿½yrï¿½dï¿½Nï¿½ï¿½HI	ï¿½90ï¿½GÈ–ï¿½ï¿½ï¿½eï¿½ï¿½qcï¿½rï¿½Eï¿½g.Ùï¿½ï¿½[[ï¿½GTylI6ï¿½ï¿½ï¿½(Eï¿½ï¿½MxÏ¬ï¿½Mzjbï¿½ï¿½ï¿½ï¿½ï¿½0ï¿½å¼¾Mï¿½ï¿½+ï¿½ï¿½}ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½D&ï¿½ï¿½63ï¿½Hï¿½pï¿½SDï¿½ï¿½Kï¿½Xj?ï¿½ï¿½/^îž—!dï¿½ï¿½sÙŸï¿½&sï¿½ï¿½ï¿½~ï¿½Vï¿½ï¿½|ï¿½ï¿½0AG&
ï¿½ï¿½mï¿½~ï¿½DJQï¿½?ï¿½ï¿½aï¿½Oï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½%ï¿½;Lï¿½"ï¿½+ï¿½ï¿½ï¿½4dQyï¿½C<Ã‡ï¿½`6ï¿½0)R%ï¿½ï¿½oï¿½ï¿½ï¿½ï¿½~=)[u0 ï¿½ï¿½Ò }ï¿½	Qï¿½ï¿½	ï¿½<>iï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½lï¿½ï¿½>|H
7f!ï¿½ï¿½"ï¿½ï¿½ï¿½sß®ï¿½qC+k%ï¿½;B5ï¿½ï¿½3ï¿½ï¿½ï¿½ï¿½l!ï¿½*ï¿½ï¿½Q6Dï¿½uï¿½ÑF%Y;ï¿½Iï¿½W3ï¿½dï¿½ï¿½ï¿½WÜ„ï¿½ï¿½ï¿½~ï¿½!ï¿½{ï¿½/Dï¿½ï¿½dï¿½$ï¿½ï¿½1ï¿½ï¿½0ï¿½ï¿½ï¿½eï¿½fï¿½ï¿½x`ï¿½Uï¿½ï¿½ï¿½Ì¢ï¿½Jï¿½ï¿½ ï¿½oRï¿½xï¿½ï¿½Ó½ï¿½ï¿½^_ï¿½Pï¿½ï¿½rï¿½YV.Ð‹#Pï¿½ï¿½qrï¿½ï¿½ï¿½)n:	Gï¿½ï¿½ï¿½ï¿½>ï¿½ï¿½1ï¿½5ï¿½Wï¿½-7ï¿½oï¿½ï¿½0Pï¿½lï¿½Joï¿½É²AGï¿½ï¿½ï¿½agï¿½)ï¿½Æ·<1!]x@ï¿½ï¿½ï¿½ï¿½ï¿½Éº<ï¿½ï¿½ï¿½&Bï¿½bï¿½|ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½C}ï¿½ ï¿½Mï¿½ï¿½ï¿½%]\ï¿½$0Èuï¿½ZRï¿½0ï¿½ï¿½ï¿½ï¿½ï¿½3-ï¿½4ï¿½ï¿½Vï¿½ï¿½O'ï¿½ï¿½cï¿½ï¿½DÞºï¿½ï¿½]DHï¿½ï¿½ï¿½>É‡ï¿½	`ï¿½ï¿½Uï¿½ï¿½tbSï¿½ï¿½CNî®¾Dï¿½ï¿½ï¿½,ï¿½!ï¿½/ï¿½ï¿½ï¿½Rï¿½$dï¿½:MHï¿½|ï¿½Gv'&ï¿½ï¿½ï¿½iDHï¿½ä‰„ï¿½ï¿½ï¿½D~ï¿½9ï¿½.5]Wï¿½ ï¿½ï¿½Cï¿½E|tï¿½~xï¿½ï¿½ï¿½ï¿½ï¿½ï¿½hï¿½ï¿½ï¿½ï¿½cqï¿½ï¿½Aï¿½ï¿½%^dNï¿½ï¿½!ï¿½'ï¿½	ï¿½ï¿½6ï¿½~ï¿½Sx0uï¿½ï¿½ï¿½ï¿½_ï¿½eï¿½~ï¿½Rï¿½ï¿½Uï¿½ï¿½mï¿½?[ï¿½]ï¿½Wï¿½ FDï¿½i#ï¿½4ï¿½ï¿½19^ iï¿½ï¿½ï¿½~]7Dï¿½4ï¿½ï¿½ï¿½ï¿½wï¿½ï¿½ï¿½H[ipï¿½#w_4ï¿½ï¿½L:ï¿½ï¿½	eï¿½ï¿½ï¿½ï¿½ï¿½pï¿½:3ï¿½ï¿½<ï¿½jï¿½ï¿½ï¿½ï¿½ï¿½æ©„Dï¿½Iï¿½xï¿½ï¿½%ï¿½NlAï¿½Sï¿½ï¿½,:ï¿½ï¿½ï¿½9Iï¿½rï¿½ï¿½ï¿½
!xÅ§ï¿½ï¿½xï¿½Sï¿½$3$ï¿½'{dï¿½(sï¿½ï¿½ï¿½ï¿½|,~Eï¿½ï¿½ ï¿½Lï¿½ï¿½1ï¿½Ö¤ï¿½-ï¿½wï¿½m&W=5ï¿½ï¿½Z%kwï¿½\ï¿½N;&ï¿½Rï¿½ï¿½sï¿½\,ï¿½ï¿½ï¿½ï¿½Èiï¿½IIï¿½>Bï¿½ï¿½ï¿½ï¿½nï¿½["ï¿½ï¿½ï¿½ï¿½(Isï¿½ï¿½ï¿½#ï¿½ï¿½Dvk!ï¿½irï¿½ï¿½ÙŠ-ï¿½Udï¿½ï¿½Idï¿½ï¿½ï¿½hï¿½KM)%~ï¿½ë“>ï¿½DOï¿½i=%ct"$ï¿½ï¿½'Zsï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½tï¿½ï¿½ï¿½ï¿½$ï¿½ï¿½ï¿½Æ–ï¿½$Jmï¿½ï¿½ï¿½$ï¿½\^W=ï¿½rIï¿½fï¿½ï¿½j<DCbÜ½R cï¿½ï¿½k;Bzkï¿½ï¿½ï¿½-2N|"ï¿½%ï¿½ï¿½^ï¿½{MD|&B+ï¿½ï¿½ï¿½ï¿½ï¿½&ï¿½ï¿½dÍï¿½ï¿½ï¿½$A6IKï¿½QrAï¿½ï¿½ï¿½Mï¿½ï¿½/ï¿½^~:hj'ï¿½ï¿½GVï¿½	]Oï¿½!dï¿½,6!]\=Gï¿½`tï¿½~ï¿½ï¿½dï¿½[ï¿½ï¿½\ï¿½&1|ï¿½ï¿½+Äš:9ï¿½Hï¿½ï¿½Gï¿½ï¿½ï¿½ï¿½Ü¤@Jï¿½ï¿½ï¿½xï¿½Nï¿½K×¦}ï¿½ï¿½hï¿½dï¿½äºŠï¿½ï¿½ï¿½ï¿½ï¿½[ï¿½ï¿½Tï¿½Nï¿½uE$5ï¿½s^ï¿½(ï¿½#{ï¿½ï¿½ !Å¤}ï¿½ï¿½t	ï¿½TEï¿½ï¿½ï¿½ï¿½ï¿½"Mï¿½3ï¿½ï¿½ï¿½ï¿½uï¿½ï¿½ZKï¿½@ï¿½E$ï¿½lï¿½Onï¿½ï¿½ï¿½U=ï¿½ Zï¿½gï¿½5o\ï¿½#;ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½gï¿½r=ï¿½ï¿½ï¿½ï¿½*gï¿½>Â²ï¿½^ï¿½%ï¿½flï¿½ï¿½aQï¿½ï¿½2Yï¿½Nï¿½lï¿½ï¿½ï¿½ï¿½	#ï¿½"cVÇŠ7ï¿½lï¿½:ï¿½yï¿½Jï¿½,ï¿½7?ï¿½ï¿½ï¿½ï¿½l>1ï¿½yï¿½C6ï¿½Aï¿½ï¿½%ï¿½BCï¿½Üšï¿½"ï¿½Lî›ˆcï¿½ï¿½ï¿½F2ï¿½ ]ï¿½ï¿½ï¿½ï¿½ï¿½ iï¿½	ï¿½ï¿½BhCï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Vï¿½Oï¿½ï¿½lï¿½ï¿½ï¿½Vï¿½ï¿½ï¿½^ÙO[,ï¿½ï¿½{Ij~Hrï¿½ï¿½$KlVï¿½~Ú†ï¿½ï¿½ï¿½,ï¿½0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½=ï¿½vË²ï¿½8ï¿½ï¿½ï¿½dï¿½ï¿½ï¿½X2ï¿½Yï¿½ï¿½ï¿½)ï¿½kï¿½ï¿½ï¿½ï¿½ï¿½te>ÜºÊ˜ï¿½r;kØ°ï¿½H_ï¿½ï¿½Uï¿½ï¿½Nï¿½Mgï¿½ï¿½ä‡¹ï¿½"FØ+#ï¿½ï¿½ï¿½owï¿½TSï¿½hï¿½ï¿½ï¿½|ï¿½(xï¿½ï¿½}daï¿½×­ï¿½#ï¿½`ï¿½=[ï¿½Hï¿½ï¿½ï¿½jSï¿½ï¿½ï¿½ï¿½[ï¿½aï¿½L.ï¿½ï¿½4N^ï¿½	-s+ï¿½ï¿½	R><Ñ”ï¿½ï¿½`8ï¿½ï¿½\BdGï¿½ï¿½sÇ¢)+ï¿½JBï¿½ëŽˆeï¿½}ï¿½ï¿½5ï¿½â¤‡ï¿½Jï¿½ï¿½ï¿½ï¿½ï¿½Î¹ï¿½rNï¿½{ï¿½ï¿½^"$ï¿½ï¿½J2ï¿½zCï¿½ï¿½ìŽ†UDg"[/!ï¿½ï¿½kB.Èa9 dï¿½ï¿½.ï¿½Qï¿½ï¿½iï¿½ï¿½ï¿½ï¿½Æˆ.A>ï¿½zï¿½ï¿½ï¿½ï¿½ï¿½MCï¿½?ï¿½ï¿½ï¿½;jwEï¿½ï¿½ï¿½ï¿½Û£~ï¿½ï¿½=%=ï¿½Jï¿½&%T:Fï¿½ï¿½ï¿½ï¿½a8pnÐ¼ï¿½ï¿½ï¿½ï¿½.ï¿½ï¿½=ï¿½ï¿½ï¿½(SÎ©ï¿½ï¿½ï¿½ï¿½ï¿½&ï¿½ï¿½ï¿½iwu4Ñ‹8ï¿½ï¿½Bï¿½ï¿½ï¿½8ï¿½ï¿½ï¿½ï¿½ï¿½J)ï¿½ï¿½ï¿½ï¿½ï¿½.ï¿½ï¿½fï¿½ï¿½ï¿½ï¿½ï¿½Wï¿½Ý”ï¿½"ï¿½&ï¿½u[Hï¿½ï¿½ï¿½ï¿½ï¿½ï¿½'Cjwï¿½ï¿½"ï¿½/ï¿½ï¿½%ï¿½Bï¿½@ï¿½ï¿½ï¿½hï¿½%Ê›8ï¿½x[ï¿½ï¿½wï¿½`":zï¿½ï¿½ï¿½<tZbï¿½ï¿½ï¿½ï¿½#ï¿½ï¿½ï¿½@ï¿½qï¿½)ï¿½ï¿½ï¿½rBmwÎ‹ï¿½ï¿½/ÝˆÞ„09ï¿½ï¿½
ï¿½=ï¿½lMzDï¿½R-ï¿½\[5ï¿½d5Fï¿½!ï¿½Ë§xï¿½pï¿½ï¿½:ï¿½#ï¿½$ï¿½ÉŒï¿½ï¿½ï¿½$A4Jï¿½&Dï¿½ï¿½WuB$ï¿½f$">tï¿½I4DCdï¿½HÜŸMï¿½.ï¿½ï¿½ï¿½Q@ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½}ï¿½ï¿½ï¿½(SiCï¿½ï¿½;ï¿½Vï¿½tï¿½Fbï¿½'Ý¡n
ï¿½z]ï¿½dï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½<Yï¿½t%<ï¿½Ç«aJï¿½:Ìœï¿½ï¿½vï¿½ï¿½ï¿½ï¿½d-:Xï¿½ï¿½Vï¿½3ï¿½ï¿½Aï¿½Kï¿½hï¿½,ï¿½6ï¿½ï¿½-vï¿½Xï¿½Â«ï¿½×™D6Dï¿½}Åµï¿½ï¿½Gsï¿½ï¿½ï¿½ï¿½ï¿½[Vwï¿½ï¿½v*ï¿½ï¿½LFï¿½@ï¿½cï¿½ï¿½Bï¿½ï¿½ï¿½ï¿½DJï¿½Yï¿½ï¿½_ï¿½ï¿½gï¿½ï¿½Ã¹ï¿½ï¿½9ï¿½gï¿½ï¿½}ï¿½ï¿½1ï¿½ï¿½ï¿½yC}ï¿½=ï¿½kï¿½4ï¿½ï¿½_ï¿½ï¿½ï¿½ï¿½|ï¿½wï¿½ï¿½ï¿½ï¿½ï¿½ï¿½1(ï¿½ï¿½ï¿½nï¿½ï¿½Zï¿½3ï¿½kï¿½EU=ï¿½/#@ï¿½ï¿½'ï¿½ï¿½ï¿½5JBï¿½ï¿½NLï¿½ï¿½ï¿½h[u7nï¿½EÚ‘ï¿½JBÖº5ï¿½Pï¿½]!ï¿½ï¿½)huï¿½Í‘ï¿½ï¿½DBï¿½ï¿½ï¿½ï¿½=ï¿½\iï¿½ï¿½oï¿½ï¿½ï¿½ï¿½ï¿½Kï¿½T]1q×•D0ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½JZÄ™ï¿½#Ä«vï¿½ï¿½ï¿½Iï¿½Hï¿½ï¿½zï¿½ï¿½ï¿½Ø¼ï¿½qï¿½\Vï¿½=a72ï¿½ï¿½ï¿½fÃ¯ï¿½8ï¿½ï¿½Jï¿½QHï¿½7ï¿½ï¿½ï¿½ï¿½nkBï¿½ï¿½ï¿½ï¿½Tï¿½wï¿½ï¿½|^j#ï¿½ï¿½Ù±k$ï¿½ï¿½ï¿½ï¿½,{ï¿½ï¿½ï¿½ï¿½jï¿½Dï¿½Pï¿½ÕŒï¿½Hï¿½ï¿½\EIï¿½ ~ï¿½*ï¿½Ss$Cï¿½ï¿½È¡ï¿½rï¿½ï¿½ï¿½ï¿½ï¿½`mQï¿½%ï¿½)ï¿½ï¿½Bï¿½ wnrï¿½ï¿½ï¿½Ë•ï¿½Gï¿½Tï¿½ï¿½ï¿½{ï¿½\y*7ï¿½ï¿½hï¿½ï¿½yEXï¿½ï¿½%ï¿½ï¿½Kï¿½ï¿½Fï¿½Gï¿½Ì™ï¿½ !ï¿½/Û‰ï¿½ï¿½Pï¿½ï¿½ï¿½Wï¿½Jï¿½^^_ï¿½ï¿½^Wï¿½1ï¿½0uï¿½ï¿½e;oPï¿½_ï¿½ï¿½ï¿½#ï¿½!kï¿½ï¿½ï¿½ï¿½Fï¿½$iï¿½,yï¿½U>"xï¿½ï¿½zY*}ï¿½ï¿½9xJï¿½rï¿½ï¿½]%!ï¿½ï¿½ï¿½ï¿½(9ï¿½';ï¿½KWÕ½ï¿½ï¿½@ï¿½ï¿½/$ï¿½Ë¤ï¿½ï¿½ï¿½ï¿½'ï¿½[ï¿½ï¿½ï¿½[]{{ï¿½Ë†ï¿½tpï¿½ï¿½[Ú¥ï¿½7ï¿½ï¿½ï¿½ï¿½Qâ± =ï¿½<ï¿½|ï¿½vcï¿½	ï¿½Æƒï¿½P&ï¿½ï¿½
Yï¿½ï¿½ï¿½}0ï¿½"^vï¿½]ï¿½ï¿½/ï¿½6ï¿½z&ï¿½ï¿½AÈ’;ï¿½ï¿½|ï¿½3!ï¿½&dï¿½ï¿½/ï¿½ï¿½8rï¿½,_Nrfï¿½kï¿½fï¿½h5Kï¿½ï¿½ï¿½ï¿½)ï¿½Ûžï¿½4ï¿½'rï¿½\oï¿½3Vï¿½ï¿½	ï¿½ï¿½ï¿½ï¿½YÚ²FP_ï¿½}ï¿½ï¿½ï¿½ï¿½ï¿½Kï¿½f3ï¿½æµ£yï¿½ï¿½	Rï¿½'ï¿½ï¿½Î£ï¿½ï¿½ï¿½ï¿½ï¿½Ïªï¿½#7dï¿½ï¿½ï¿½lï¿½tï¿½vï¿½ï¿½ÇšZ%ï¿½rï¿½hLz8ï¿½)Cï¿½ï¿½ï¿½\ï¿½Í«Wï¿½P'+ä®Žï¿½#ï¿½Xyï¿½Kiï¿½qFï¿½Lï¿½ï¿½ï¿½ï¿½u6"o %ï¿½wIï¿½ï¿½7ï¿½Nrï¿½ï¿½)ï¿½7wï¿½4=ï¿½L&bï¿½ï¿½@'ï¿½Ï‘ï¿½wï¿½WMï¿½bï¿½6ï¿½ï¿½ï¿½qDï¿½ï¿½ï¿½ï¿½ss}cï¿½}wOGtï¿½ï¿½Hï¿½ï¿½ï¿½>LvfMï¿½3\%ï¿½ï¿½ï¿½;Jï¿½ï¿½ï¿½ï¿½^ï¿½ï¿½ï¿½!ï¿½ï¿½Jï¿½(!ï¿½ï¿½ï¿½]ï¿½ï¿½ï¿½I5yuï¿½ï¿½-;ï¿½ï¿½'ï¿½ï¿½ï¿½ï¿½+!1ï¿½Ø•\tï¿½Lï¿½ï¿½ÆŒtï¿½ï¿½ï¿½ï¿½ï¿½Mï¿½#$ï¿½v/Uï¿½ï¿½ï¿½yï¿½]ï¿½VWaï¿½Ý¨ï¿½Ñ¥Bï¿½	ï¿½ï¿½Sï¿½W5J"ï¿½Xï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Æ‘ï¿½7ï¿½Kï¿½ï¿½	ï¿½ï¿½Dï¿½ï¿½SB*ï¿½ï¿½ï¿½ï¿½Oï¿½ï¿½Eï¿½ï¿½ï¿½Jï¿½ï¿½]ï¿½|1ï¿½ï¿½a{ï¿½!ï¿½ï¿½kï¿½ï¿½ï¿½|ï¿½ï¿½ï¿½ï¿½ï¿½oT2cRï¿½ï¿½w6ï¿½ï¿½ï¿½ï¿½rï¿½ï¿½iï¿½ï¿½{ï¿½$?Î†(#uï¿½vï¿½ï¿½S/ï¿½ï¿½kï¿½ï¿½ï¿½zï¿½ï¿½XPï¿½V/9ï¿½UÓ«ï¿½ï¿½%ï¿½ï¿½ï¿½ ï¿½!ï¿½,!N!ï¿½Ï»ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Xï¿½Iï¿½ï¿½ï¿½k.ï¿½ï¿½ï¿½ï¿½ï¿½#ï¿½!vï¿½	Bï¿½Dï¿½ï¿½!ï¿½ï¿½m`ï¿½ï¿½]ï¿½ï¿½"ï¿½rKHï¿½ï¿½ï¿½Êï¿½xï¿½ï¿½hFHï¿½Hï¿½iï¿½!ï¿½ï¿½unï¿½Ê›yï¿½ï¿½~xï¿½ï¿½XWï¿½\En0rï¿½%ï¿½ÎŽï¿½ï¿½FÎ‘ï¿½ï¿½)'rï¿½ï¿½ï¿½ï¿½ï¿½Ä½Dã‹¶ï¿½ï¿½ï¿½]ÐŽï¿½ï¿½ï¿½ï¿½*ï¿½ï¿½Nï¿½dX%ï¿½fï¿½nï¿½ï¿½ï¿½.ï¿½ig\ï¿½ï¿½ï¿½ï¿½uï¿½ï¿½Tï¿½ï¿½ï¿½Rï¿½jï¿½ï¿½4`ï¿½ï¿½>É‡ï¿½ ï¿½ï¿½Wï¿½ï¿½$ï¿½&W>ï¿½#j;ï¿½ï¿½ï¿½ï¿½N&ï¿½ï¿½aï¿½7ï¿½ï¿½Q5Rï¿½ï¿½Aï¿½Dï¿½MEJï¿½ï¿½ï¿½g$ï¿½ï¿½Nï¿½ï¿½zï¿½Ç¿ï¿½zï¿½kï¿½Hï¿½ï¿½DCï¿½Cï¿½Wï¿½ï¿½=#;5ï¿½nï¿½ï¿½ï¿½ï¿½ï¿½Owï¿½ï¿½;ï¿½É‰ï¿½ï¿½sï¿½ï¿½ï¿½hï¿½ï¿½ï¿½ï¿½L.4ï¿½7=aeï¿½iJï¿½ï¿½ï¿½ï¿½8ï¿½ï¿½ï¿½~ï¿½ï¿½ï¿½Oï¿½ï¿½ï¿½ï¿½ï¿½Vg^(Úšï¿½ï¿½eï¿½a'ï¿½Fï¿½WTï¿½Kï¿½nï¿½^vï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Hï¿½ï¿½ï¿½ï¿½	_a
yï¿½e}ï¿½ï¿½\ ï¿½"ï¿½w]Bï¿½Hï¿½I,ï¿½R QBfï¿½]#$ï¿½ï¿½ï¿½f$Bï¿½cï¿½ï¿½ï¿½ÝŽï¿½ï¿½ï¿½LEï¿½ï¿½.ï¿½ï¿½8Eï¿½iKGï¿½~ï¿½ï¿½iUP)ï¿½ï¿½,ï¿½ï¿½|ï¿½ï¿½ï¿½ï¿½-E
/ï¿½ï¿½ï¿½#9	ï¿½7/ï¿½ï¿½ï¿½1L$ï¿½s!ï¿½ï¿½lï¿½ï¿½ï¿½sjï¿½ï¿½jï¿½ï¿½ï¿½ï¿½ï¿½pR4ï¿½ZKï¿½Lï¿½Ö…ï¿½%ï¿½vï¿½[ï¿½:ï¿½&ï¿½,ï¿½2GZï¿½ï¿½eï¿½ï¿½ï¿½Ù­ï¿½ï¿½%oÝ¬-ï¿½ï¿½ï¿½;-~ï¿½ï¿½ï¿½ï¿½ï¿½SPjï¿½9ï¿½t+Z>ï¿½H)ï¿½ï¿½ï¿½."ï¿½dï¿½ï¿½ï¿½vï¿½SXï¿½ï¿½ï¿½n;{Cï¿½ï¿½Zï¿½ï¿½ï¿½ï¿½Wï¿½ï¿½ï¿½ï¿½bï¿½lï¿½ï¿½i#ï¿½"Yï¿½ï¿½ï¿½VNï¿½ï¿½^rAHMï¿½hï¿½ï¿½ï¿½ï¿½/ÎŒï¿½?ï¿½G
I[ï¿½,=ï¿½Sï¿½6ï¿½4oCGï¿½ï¿½Ndï¿½.ï¿½vï¿½Hï¿½ï¿½?Oï¿½ï¿½ï¿½*ï¿½ï¿½ï¿½Å¨'ï¿½ [oVNï¿½=;Qï¿½  Vï¿½{=ï¿½;ï¿½Gï¿½ï¿½>Ig'g1ï¿½+Ò±ï¿½ï¿½Yç°”ï¿½ï¿½{-hqï¿½[ï¿½W×„lï¿½Iï¿½ï¿½SÈ‘*ï¿½=ï¿½ï¿½>ï¿½Î‹rï¿½ï¿½^ï¿½}ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½!ï¿½1Oï¿½d]?ï¿½ï¿½Iï¿½ï¿½ï¿½>ï¿½ï¿½n,,ï¿½ï¿½ï¿½sY^Ó¥Hï¿½ï¿½Cï¿½EZï¿½_ï¿½aÕªï¿½ï¿½{ï¿½ï¿½ï¿½ï¿½kUHï¿½ï¿½*ï¿½0Nï¿½ï¿½Cï¿½$^:dï¿½ï¿½cï¿½!ï¿½s" ï¿½ï¿½ï¿½È¦jMï¿½ï¿½&*Bï¿½ï¿½~ï¿½ï¿½(	Yqï¿½ï¿½ï¿½LHï¿½@ä¼,ï¿½6aï¿½ï¿½ï¿½ï¿½Xï¿½ï¿½ï¿½Yï¿½ï¿½Ù’yYï¿½k#ï¿½Tpï¿½#ï¿½C=ï¿½&sï¿½ï¿½Ô±ï¿½ï¿½kï¿½Eï¿½ï¿½sï¿½_ï¿½ï¿½ï¿½ï¿½n`8ï¿½ï¿½O='Uï¿½Byï¿½Ö›[8=UÛ‹ï¿½ï¿½ï¿½ï¿½Lï¿½ï¿½nk^]ï¿½fï¿½ï¿½ï¿½ï¿½6{ï¿½ï¿½ï¿½ï¿½-ï¿½		ï¿½ï¿½^ï¿½ï¿½Tï¿½Iï¿½ï¿½a|ï¿½ï¿½Í—ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½,ï¿½R}`Fï¿½ï¿½44>ï¿½ï¿½ï¿½ï¿½yï¿½ï¿½Dï¿½Fï¿½7È›{ï¿½ï¿½-ï¿½ï¿½/h?ï¿½,ï¿½ï¿½ï¿½ï¿½ï¿½Aï¿½ï¿½r"ï¿½ï¿½ï¿½ï¿½dB:ï¿½kï¿½ï¿½ï¿½ï¿½ï¿½ï¿½dï¿½C:{ï¿½Qï¿½ï¿½ï¿½aï¿½oÉ´ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½->ï¿½gjï¿½gGï¿½ï¿½ï¿½nï¿½ï¿½@ï¿½^Fï¿½Aï¿½ï¿½ï¿½x)ï¿½wQUï¿½ï¿½ï¿½Õ’ï¿½ï¿½b_ï¿½ï¿½ï¿½jï¿½BXxï¿½ï¿½oSï¿½ï¿½ï¿½ï¿½ICï¿½Ä¦ï¿½^ï¿½ï¿½ï¿½ï¿½vï¿½ï¿½)Iï¿½|ï¿½@ï¿½aï¿½Zï¿½3aï¿½cï¿½ï¿½ï¿½Nï¿½ï¿½ï¿½ï¿½?Yï¿½ï¿½ï¿½'Lï¿½Jï¿½Q[ï¿½ï¿½Nï¿½ï¿½ï¿½ï¿½ï¿½4å’Œ)Kï¿½$ï¿½ï¿½ï¿½Xï¿½$	rEtÄ &ï¿½ï¿½ï¿½v/ï¿½ï¿½R^Lï¿½ï¿½dï¿½ï¿½ï¿½ï¿½ï¿½ï¿½.Bn+Ì¤1ï¿½"dï¿½æˆvR);'ï¿½ï¿½ï¿½ï¿½4ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½dï¿½Tï¿½ï¿½ï¿½ï¿½?ï¿½ï¿½|ï¿½ï¿½ï¿½Nï¿½7j-=)ï¿½ï¿½ï¿½ï¿½Iï¿½COw8>ï¿½kï¿½Wï¿½ï¿½bï¿½ï¿½ï¿½ayï¿½ï¿½ï¿½ï¿½Lï¿½3È¯qï¿½ï¿½A[eï¿½ï¿½pï¿½ï¿½Aï¿½2ï¿½ï¿½ï¿½ï¿½|kï¿½ï¿½ï¿½Dï¿½Ú•ï¿½ï¿½/ï¿½ï¿½,ï¿½pï¿½ï¿½@sï¿½ï¿½~<ï¿½ï¿½"ï¿½ï¿½ï¿½ï¿½ï¿½"ï¿½ï¿½!ï¿½ï¿½5ï¿½Æ’ï¿½l;Rï¿½Í²Cï¿½ï¿½ï¿½|,ï¿½ï¿½9dï¿½ï¿½gï¿½ï¿½ï¿½5bÚ¨ï¿½ï¿½X'ï¿½$ï¿½ï¿½ï¿½ï¿½';,ï¿½ï¿½ï¿½;ï¿½ï¿½ï¿½2"ï¿½×½Ó›ÞŽrï¿½ï¿½ï¿½Lï¿½ï¿½>mï¿½OZï¿½ï¿½|ï¿½ï¿½\ï¿½ï¿½ï¿½è„½ï¿½$C_bziï¿½|ï¿½%ï¿½;'ï¿½qwS!2~7ï¿½I{%ï¿½8!Dï¿½&$OH)ï¿½ï¿½&ï¿½ï¿½HÝ¾ï¿½ï¿½pï¿½ï¿½jï¿½=ï¿½ï¿½oPï¿½3ØŠd4Dï¿½Yï¿½;ï¿½!ï¿½]ï¿½oï¿½'Ï¾j2aï¿½IÑ q%|Lï¿½mï¿½ï¿½Iï¿½ï¿½ï¿½Wï¿½jßï¿½ï¿½ï¿½ï¿½m-!ï¿½ï¿½6ï¿½ï¿½V%ï¿½D3H|$ï¿½Uï¿½ï¿½ï¿½W ï¿½ï¿½dmï¿½Rï¿½TX~ï¿½ï¿½0!ï¿½fï¿½
ï¿½ï¿½[;u?Mï¿½ï¿½ï¿½_ï¿½ï¿½m<ï¿½yï¿½ï¿½Uï¿½-luä•„ZÕš+4ï¿½ï¤²Ó‰ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½4<ï¿½ï¿½ï¿½ï¿½Oï¿½$ï¿½eï¿½]#vï¿½Ü€ï¿½
nYï¿½:<ï¿½ï¿½!ï¿½Âœï¿½r*ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½7ï¿½ï¿½ï¿½7pï¿½Vï¿½%ï¿½Ý€8ï¿½^ï¿½ï¿½ï¿½ï¿½aï¿½ecï¿½ï¿½ ï¿½ï¿½SOÉª?ï¿½ï¿½ï¿½ï¿½Ö¨ï¿½ï¿½ï¿½6ï¿½ï¿½ï¿½=ï¿½6#Vï¿½ï¿½ï¿½69rï¿½ï¿½ï¿½ï¿½
ï¿½ï¿½ÆŸï¿½rï¿½ï¿½$ï¿½ï¿½ï¿½W'5ï¿½ï¿½ï¿½ï¿½ï¿½&2ï¿½ï¿½#ï¿½ï¿½ï¿½ï¿½@ï¿½ï¿½ï¿½Nï¿½ï¿½ï¿½Sï¿½eï¿½Q5'/ï¿½Tï¿½Iï¿½ï¿½ï¿½ï¿½Ppï¿½ï¿½ÅŸ>&ï¿½ï¿½×¤cï¿½?9ï¿½> ï¿½riï¿½ï¿½xï¿½ï¿½ï¿½mï¿½Wï¿½ï¿½ï¿½ï¿½]ï¿½Â¿Gwï¿½ï¿½XEFï¿½_ï¿½ï¿½ï¿½R ï¿½m%I"ï¿½C/ï¿½ï¿½ï¿½NHï¿½ï¿½ï¿½ï¿½tï¿½ï¿½DkA\^ï¿½W2ï¿½ï¿½ï¿½Afï¿½ï¿½ï¿½Vt 5ï¿½2Mï¿½ï¿½3ï¿½ï¿½Eï¿½ï¿½I9Qï¿½ï¿½ï¿½ï¿½Ï±Wï¿½nï¿½ï¿½jGï¿½ï¿½)gï¿½ï¿½ï¿½Nï¿½ï¿½Ir>ï¿½NÄ’ï¿½ï¿½+ï¿½ï¿½ï¿½
bï¿½<`pï¿½_ï¿½ï¿½[ï¿½ï¿½ï¿½bA$ï¿½Dï¿½ï¿½*Vï¿½%ï¿½ï¿½ï¿½U7(PvDE\ï¿½'sï¿½fï¿½ï¿½/|ï¿½;l4Eg[ï¿½ï¿½Fï¿½ï¿½zSï¿½ï¿½ï¿½8ï¿½Lkï¿½ï¿½ï¿½ï¿½@ï¿½e
Xï¿½ï¿½1#ï¿½{ï¿½)b_-ï¿½(zê€»=ï¿½uyï¿½ï¿½*ï¿½ï¿½-ï¿½ï¿½SUÈ‚ï¿½ï¿½ï¿½ï¿½dUï¿½ï¿½8Zï¿½ï¿½ï¿½ï¿½]ï¿½ï¿½ï¿½ï¿½ï¿½Leï¿½pNï¿½Rï¿½ï¿½X{ï¿½6!:)ï¿½
ï¿½7|uï¿½ï¿½ï¿½ï¿½ï¿½cï¿½ï¿½ï¿½ï¿½%]ï¿½ï¿½mï¿½F1y6U3ï¿½=ï¿½Qï¿½ï¿½vï¿½ÔXï¿½ï¿½ï¿½bï¿½U|ï¿½ï¿½pï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Wï¿½ ï¿½KIï¿½ï¿½ik+!ï¿½yï¿½ï¿½|ï¿½mï¿½A6ï¿½ï¿½0!ï¿½ï¿½ë°ï¿½a Hï¿½	ï¿½ï¿½_ï¿½ï¿½~ï¿½ï¿½?kï¿½ï¿½*u!ï¿½ï¿½ï¿½C1|Lï¿½M%ï¿½ï¿½a,yï¿½Hï¿½zï¿½lï¿½CZUï¿½ï¿½mYï¿½ï¿½6(ï¿½%rï¿½ï¿½ï¿½ï¿½ ï¿½,p.ï¿½= ï¿½?ï¿½2mï¿½ï¿½&Dï¿½V84Zâ…Šï¿½ï¿½Qï¿½,ï¿½ï¿½ï¿½)ï¿½ï¿½	ï¿½-ï¿½ï¿½jHï¿½ï¿½cÏ¦3ï¿½t>ï¿½ï¿½8ï¿½ï¿½_V/*ï¿½ï¿½Uï¿½ï¿½
11Zï¿½/ï¿½ï¿½9ï¿½ï¿½ï¿½ï¿½&3bjpï¿½qï¿½ï¿½È€-ï¿½ï¿½ï¿½ï¿½mï¿½$?ï¿½$ï¿½(ï¿½
ï¿½4@ï¿½wï¿½ï¿½#M9Bï¿½ï¿½4ï¿½*ï¿½ï¿½ï¿½Kï¿½ï¿½xï¿½oGï¿½ï¿½ï¿½eï¿½D;&ï¿½ï¿½ï¿½ï¿½sï¿½.ï¿½ï¿½jï¿½OkDï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½7ï¿½ï¿½b$ï¿½Xï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½wï¿½ï¿½ß–_É°ï¿½#CNÏ‹ï¿½%ï¿½(QZï¿½[Úšiï¿½ï¿½ï¿½Kyï¿½Ú»ÓŒï¿½ï¿½ï¿½uï¿½ï¿½ï¿½uï¿½ï¿½ï¿½ï¿½Dï¿½ï¿½ï¿½G*Y'ï¿½ï¿½nRVSX ï¿½s?ï¿½Aï¿½eqï¿½ï¿½ï¿½×˜ï¿½Hï¿½ï¿½ï¿½DbL ï¿½ï¿½Í­SRï¿½ï¿½nï¿½ï¿½Nï¿½Meï¿½ï¿½ï¿½>ï¿½Rgï¿½ï¿½ï¿½X5ï¿½h
ï¿½Å•7ï¿½ï¿½ï¿½.ï¿½ï¿½ï¿½^P=ï¿½ï¿½Iï¿½Jï¿½"yNwï¿½Oï¿½/ï¿½ï¿½Gï¿½pï¿½ï¿½ï¿½:~ï¿½ï¿½]ï¿½QRï¿½{GÜ¹ï¿½ï¿½ï¿½)B$ï¿½ï¿½ï¿½~ï¿½ï¿½ybS>ï¿½ï¿½TDï¿½ï¿½ï¿½bï¿½ï¿½ï¿½ï¿½`ï¿½uï¿½(ï¿½l(Ë¶ï¿½ï¿½ï¿½ï¿½rw)Vwï¿½ï¿½7ï¿½ï¿½/cï¿½ï¿½Oï¿½ié£‚H/ï¿½ãµ¢eï¿½ï¿½ï¿½;ï¿½ï¿½,ï¿½!ï¿½?vkï¿½ï¿½ï¿½b/%ï¿½ï¿½ï¿½Fï¿½,ï¿½ï¿½ï¿½[ï¿½#ï¿½7ï¿½Eï¿½D;ï¿½pï¿½Uï¿½Ã«ï¿½ï¿½ï¿½39ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½eï¿½Dï¿½\CDÙ¸l?"ï¿½Q"$DGï¿½H?ï¿½wï¿½Bï¿½_ï¿½ï¿½Øª&ï¿½ï¿½ï¿½'Bï¿½ï¿½l:ï¿½Vï¿½Pï¿½?ï¿½ï¿½ï¿½Jï¿½ï¿½Lï¿½ï¿½ï¿½ï¿½ï¿½|;Ò³ï¿½Qï¿½y!nï¿½$ï¿½{ï¿½ï¿½ï¿½d>L)ï¿½oï¿½ERï¿½ï¿½Zï¿½ï¿½ï¿½ï¿½/{Iï¿½pbï¿½ï¿½ï¿½}ï¿½DMï¿½6ï¿½oï¿½3ï¿½Rï¿½/iï¿½pï¿½.)^!Ö‹ï¿½:hmï¿½(ï¿½bÞ¯ï¿½ï¿½ï¿½Yï¿½Jlï¿½ï¿½ï¿½ï¿½ï¿½ï¿½[ï¿½ï¿½ï¿½M>Mzï¿½dï¿½ï¿½wï¿½ï¿½FI ï¿½ï¿½{ï¿½{<ï¿½dï¿½ï¿½2ï¿½ï¿½ï¿½ï¿½uï¿½pï¿½ï¿½ï¿½wEï¿½@ï¿½ï¿½M-ï¿½gwï¿½ï¿½ï¿½ï¿½ï¿½7gbï¿½Sï¿½y;ðš‚†ï¿½ï¿½Aï¿½ï¿½ï¿½ï¿½Y.Lï¿½Hk?ï¿½!Aï¿½*ï¿½|Ë‹ï¿½]fï¿½ï¿½WIUï¿½ï¿½0ï¿½ï¿½Vï¿½ï¿½Rï¿½vlLï¿½
WP)GBzlï¿½_ï¿½ï¿½ï¿½ï¿½?fï¿½ï¿½Â‚ï¿½wOï¿½ï¿½ï¿½_Iï¿½g	ï¿½~Lï¿½dï¿½ï¿½Yb+d{È§ï¿½ï¿½ï¿½{ï¿½{zp
93ï¿½ï¿½ï¿½fKnJ4Èˆï¿½ï¿½!ï¿½ï¿½ï¿½d\J;ï¿½Rï¿½nï¿½8ï¿½ï¿½Jï¿½F_ï¿½ÏŠ8!.	~Khï¿½wï¿½Hi4ï¿½/`ï¿½ï¿½ï¿½Xxbï¿½<ï¿½ï¿½Haï¿½[Mzï¿½ï¿½1q^ï¿½Ö¿ï¿½_)&sF[Õ‡=w?Ø‚ï¿½ï¿½Qï¿½ï¿½ï¿½jï¿½ï¿½Ó‚'ï¿½+ï¿½~1ï¿½ï¿½"ï¿½ï¿½|!ï¿½=ï¿½J^ï¿½ï¿½ï¿½ihï¿½ï¿½Éœnï¿½ï¿½(9ï¿½ï¿½)ï¿½ÛŽé›§ï¿½jï¿½ï¿½ï¿½dï¿½umï¿½7ï¿½ï¿½ï¿½kï¿½{ï¿½)ï¿½ï¿½k\|ï¿½ï¿½ï¿½}Dbï¿½Zdï¿½~dï¿½ï¿½ï¿½lï¿½;CHï¿½,92ï¿½ï¿½Uvjï¿½ï¿½DO=ï¿½ï¿½]ï¿½wï¿½Pï¿½ï¿½ï¿½ï¿½
-fï¿½nolï¿½Hd-ï¿½.ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ä—ï¿½Tï¿½ï¿½ï¿½V;	ï¿½Wï¿½ï¿½ï¿½ï¿½ï¿½'iï¿½aï¿½ï¿½"ï¿½ï¿½Yï¿½1`ï¿½/ï¿½ï¿½ï¿½ï¿½ï¿½Z7vÂ¾Æ‰ï¿½ï¿½ï¿½O^ï¿½6Lzï¿½xï¿½L
;~ï¿½`ï¿½W>ï¿½O>ï¿½xCï¿½Bï¿½ï¿½lï¿½ï¿½Kï¿½4ï¿½ï¿½ï¿½ï¿½ln> =ï¿½ï¿½Zï¿½ï¿½ï¿½ï¿½ï¿½
Rh#!oï¿½ï¿½h7UnBï¿½@ï¿½-ï¿½ï¿½ï¿½ï¿½ï¿½	!ï¿½ï¿½D{Lï¿½1!dï¿½ï¿½ï¿½7ï¿½ï¿½:ï¿½ï¿½'ï¿½ï¿½_ï¿½:rï¿½ï¿½	rï¿½%Nï¿½ï¿½ï¿½E2ï¿½-{rDï¿½ï¿½fï¿½ï¿½cUEï¿½ ï¿½lï¿½Nï¿½ï¿½ï¿½ï¿½ï¿½ï¿½vï¿½ï¿½>ï¿½3?ï¿½uï¿½fï¿½ï¿½ï¿½ï¿½ï¿½^ï¿½@ï¿½ï¿½*ï¿½zï¿½%t3ï¿½ï¿½mï¿½Ê›ï¿½ÑŸï¿½ï¿½:ï¿½ï¿½ï¿½E>k	qï¿½MDS!;ï¿½ï¿½zAehRmTï¿½2GD^ï¿½gï¿½ï¿½Å›ï¿½	T6MtVKuï¿½ï¿½Hqï¿½}Uï¿½lLï¿½ï¿½.t"ï¿½ï¿½ï¿½ï¿½pï¿½ï¿½É“ï¿½Qä”hMRï¿½ayÞŠï¿½n/2ï¿½"ï¿½ï¿½4T<ï¿½ï¿½fï¿½\ï¿½ï¿½ï¿½Fï¿½ï¿½tBï¿½ï¿½ï¿½1Y#ï¿½ï¿½ï¿½Ê†{ï¿½ï¿½ï¿½ï¿½ï¿½=bï¿½ï¿½ï¿½;"'ï¿½-ï¿½ ï¿½&ï¿½ï¿½^ï¿½ï¿½ï¿½yï¿½\ï¿½l]ï¿½vï¿½ï¿½	ï¿½ï¿½ï¿½Dz Öœ7~ï¿½<ï¿½ï¿½L,ï¿½]ï¿½ï¿½ï¿½8ï¿½Euï¿½ï¿½)ï¿½,ï¿½ï¿½ï¿½ï¿½ï¿½l
kï¿½ï¿½ï¿½Yï¿½ï¿½ï¿½{+ï¿½Q:ÄŒï¿½ï¿½)ï¿½]ï¿½8ï¿½ï¿½xï¿½K)ï¿½Ì’]"+dmï¿½hu9sOï¿½ï¿½ï¿½ï¿½ï¿½Zï¿½Rï¿½$ï¿½ï¿½ï¿½ï¿½oï¿½ !*eï¿½6QÅˆï¿½ï¿½\ ï¿½Â«ITrNjï¿½ï¿½5ï¿½ï¿½ï¿½ï¿½IR7NPï¿½ï¿½Cï¿½Aï¿½W}pcï¿½ï¿½Kï¿½J[&Iï¿½gï¿½ï¿½Lï¿½N\DIï¿½0Eï¿½ï¿½ï¿½ï¿½I2ï¿½#ï¿½ï¿½ï¿½yNï¿½ï¿½ï¿½ï¿½ï¿½ï¿½É§Uï¿½Dï¿½ï¿½Y{JV4$ï¿½sï¿½dv*&ï¿½Ö»ï¿½ï¿½jR[[ï¿½fï¿½ï¿½]ï¿½K;ï¿½Ï¬+#ï¿½ï¿½&Iï¿½Ô™ï¿½ï¿½uï¿½Jï¿½ï¿½xï¿½8(UfÅ½ï¿½ï¿½+ï¿½Ð´ï¿½ï¿½ï¿½'ï¿½ï¿½vï¿½ï¿½)ï¿½Î¹{x?Ä®ï¿½ï¿½FzÎ¦,ï¿½æ£¯ï¿½tDï¿½Dï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½dï¿½ï¿½ï¿½ï¿½wï¿½ï¿½
CÒºï¿½[rr.$ï¿½Jï¿½ï¿½W6*ï¿½ï¿½ï¿½qï¿½ï¿½Rï¿½CJY{Qï¿½ï¿½bï¿½ï¿½B~ï¿½ï¿½ï¿½qï¿½*DTRy9ï¿½!*?9$d$@ZHï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½~^sï¿½6Vï¿½jï¿½ï¿½5ï¿½IUVï¿½tï¿½2}ï¿½ï¿½ï¿½ï¿½ÛŒï¿½2ï¿½QLIï¿½ï¿½`ï¿½Õ²ï¿½ï¿½:ï¿½ï¿½ï¿½ËŸwï¿½ï¿½KIRï¿½ï¿½ï¿½ï¿½ï¿½fï¿½^ Ç·ï¿½ï¿½ï¿½ï¿½ï¿½lï¿½Hvï¿½5ï¿½ï¿½Dï¿½k7ï¿½ï¿½!))ï¿½9ï¿½xï¿½ï¿½ï¿½ï¿½,Õ£_ï¿½\ï¿½ï¿½Ã´vï¿½Ý©cï¿½Yï¿½oï¿½ï¿½B"ï¿½ï¿½ï¿½Ã»~ï¿½Kï¿½Â‰#Éšsï¿½ï¿½kMï¿½#ï¿½ï¿½$ï¿½Ê­ï¿½Qlï¿½ï¿½Pï¿½ï¿½!%+ï¿½ï¿½<eï¿½ï¿½ï¿½='fï¿½ï¿½8ï¿½ï¿½iï¿½dï¿½/ï¿½ï¿½fï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½lBï¿½Vï¿½$ï¿½BCï¿½ï¿½
ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½%dk[>lï¿½ï¿½wï¿½\_ï¿½Sï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Vï¿½ï¿½jï¿½mR_5ï¿½ï¿½ï¿½ÌŽ^ï¿½}ï¿½}ï¿½ï¿½ï¿½ï¿½ï¿½	R&6ï¿½kï¿½×“ï¿½ï¿½ï¿½ï¿½ï¿½/ï¿½tï¿½ï¿½ï¿½{8ï¿½5ï¿½ï¿½kï¿½ï¿½ï¿½ï¿½$ï¿½'{ï¿½%ÛµJGï¿½ï¿½ï¿½ï¿½v4ï¿½Qï¿½ï¿½ï¿½Pï¿½Ñ£ï¿½ï¿½ï¿½dÍ¡ÏŒï¿½ï¿½wï¿½nï¿½Wbï¿½iï¿½jC;uï¿½ï¿½Yï¿½ï¿½ï¿½ ï¿½HÊžAÄŠÛ—'eï¿½ï¿½ï¿½ï¿½iï¿½:zï¿½=Wï¿½È´ï¿½ï¿½ï¿½Vï¿½qï¿½$ï¿½mï¿½+ï¿½ï¿½kï¿½n8ï¿½Zï¿½+ï¿½
SVXï¿½f}~ï¿½ï¿½s!ï¿½~H-&ï¿½kBï¿½ï¿½ï¿½uGï¿½~ï¿½Wï¿½Oï¿½sï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½{ï¿½ï¿½ï¿½ !ï¿½N"$ï¿½ï¿½ï¿½ï¿½Jï¿½aï¿½ zJfï¿½ï¿½EIï¿½dï¿½!ï¿½ï¿½rï¿½ï¿½ï¿½ï¿½4ï¿½Uï¿½Kï¿½Svï¿½hï¿½/Eï¿½aï¿½ï¿½ï¿½ï¿½9ï¿½}uï¿½ï¿½ï¿½aM<^9ï¿½0ï¿½ï¿½ï¿½eï¿½Þ¿ï¿½ï¿½Kï¿½Jï¿½ï¿½Dï¿½ï¿½,UÂ–jmCï¿½sQ-ï¿½óž¶€ï¿½ï¿½ï¿½ï¿½ï¿½EXOï¿½ï¿½ï¿½a ï¿½!ï¿½ï¿½^ï¿½ï¿½Ì»~ï¿½ï¿½ï¿½ï¿½uï¿½Uï¿½N!Bï¿½ï¿½ï¿½ ï¿½ï¿½E#ï¿½ï¿½ï¿½rï¿½ï¿½ï¿½ï¿½ï¿½>EzLAï¿½Gï¿½ï¿½ï¿½ï¿½ï¿½@.ï¿½2sHï¿½ï¿½ï¿½WW	!dï¿½D|$;ï¿½KHï¿½ï¿½ï¿½92ï¿½_y`Qï¿½ï¿½nï¿½Vï¿½;WLï¿½=ï¿½[Öœï¿½ï¿½Iï¿½ï¿½}XMÈ‰ï¿½dU{ï¿½ï¿½Hï¿½ØŸï¿½ï¿½ï¿½Â¥ï¿½P&ï¿½Fï¿½ï¿½ï¿½ï¿½[Dï¿½ï¿½tï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Nï¿½ï¿½ï¿½ï¿½a#aï¿½ï¿½ï¿½+"7ï¿½"ï¿½
ï¿½ï¿½=hÈ©'Úªoï¿½Ù³U+ï¿½ï¿½uDï¿½thï¿½ï¿½ï¿½|gï¿½ï¿½|dÙ³ï¿½(Ô–ï¿½t&ï¿½ï¿½ï¿½ï¿½ï¿½j+ï¿½ï¿½ï¿½Iï¿½wVï¿½ï¿½hï¿½ï¿½ï¿½d;ï¿½ï¿½lï¿½kï¿½ï¿½ï¿½ï¿½Fï¿½ï¿½Ñ›ï¿½vOï¿½Î•Vï¿½ï¿½,ï¿½dï¿½qï¿½ï¿½ï¿½Ç®Þ¨ï¿½yNï¿½Jï¿½3ï¿½wï¿½tß—ï¿½ï¿½Hzï¿½ï¿½ï¿½ï¿½ï¿½dï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Jï¿½[ï¿½N98Û®"onDï¿½Lï¿½`M<6ï¿½9#ï¿½ï¿½aï¿½ï¿½9ï¿½.{lï¿½ï¿½%Ò‘#ï¿½ï¿½dï¿½ï¿½`ï¿½ï¿½Ä°Ç6)ï¿½ï¿½ï¿½ï¿½Bï¿½+ï¿½ï¿½ï¿½Ñ¦ï¿½ï¿½Qï¿½#:GTR>ï¿½$ï¿½mCï¿½eDï¿½>ï¿½ï¿½Dï¿½|Yï¿½~ï¿½"&ï¿½ï¿½ï¿½Dï¿½ï¿½ï¿½*ï¿½ï¿½rï¿½ï¿½"ï¿½ï¿½lï¿½ï¿½lï¿½	ï¿½RLï¿½ï¿½ï¿½ï¿½LU)"!ï¿½JrI*}ï¿½ï¿½=ï¿½ë°‡9ï¿½%ï¿½1lw/ï¿½ï¿½jï¿½ï¿½ï¿½ï¿½%ï¿½ï¿½ï¿½iï¿½ï¿½Å®ï¿½ï¿½]ï¿½ï¿½Kï¿½ï¿½ï¿½)ï¿½Aï¿½cNÉ§ï¿½ï¿½ï¿½>ï¿½Yï¿½ï¿½Ccï¿½Eï¿½ï¿½Wï¿½p-ï¿½ï¿½Yï¿½Aï¿½Ì¿ï¿½ï¿½ï¿½-ï¿½
ï¿½ï¿½mï¿½ï¿½ï¿½ï¿½dï¿½ï¿½ï¿½M:ï¿½ï¿½J>Rï¿½ï¿½g7'Vï¿½,ï¿½-ï¿½/ï¿½Â£ï¿½ï¿½ï¿½!ï¿½ï¿½ï¿½Å¿ï¿½ï¿½ï¿½<e(ï¿½ï¿½SÅ”Pï¿½!Eï¿½ï¿½ï¿½ï¿½Ô¡6ï¿½xt#Jï¿½ÝŸï¿½ï¿½ï¿½kï¿½Lï¿½ï¿½iï¿½ï¿½ï¿½ï¿½r^ï¿½L|ï¿½+ï¿½ï¿½ï¿½ï¿½ï¿½cï¿½ï¿½xï¿½ï¿½]ï¿½&2sï¿½	@Aï¿½ï¿½ï¿½z^'ï¿½rxï¿½ï¿½3cï¿½'ï¿½ï¿½ï¿½aAï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½AEï¿½\ï¿½ï¿½|ï¿½,ï¿½ï¿½É‘ï¿½Hï¿½ï¿½ï¿½o]ï¿½ï¿½6ï¿½Â²ï¿½ï¿½Õƒï¿½ï¿½ï¿½~8Ï¢ï¿½Öˆï¿½ï¿½ï¿½"ï¿½}Yï¿½ï¿½ÄÕ®ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½9ï¿½}ï¿½aï¿½ï¿½ï¿½" ï¿½ï¿½[Yï¿½5ï¿½ï¿½Uï¿½tï¿½ï¿½Mï¿½eï¿½ï¿½ï¿½ï¿½,4zï¿½_ï¿½Jï¿½ï¿½Kï¿½Û¸Jï¿½ï¿½4Hrï¿½ï¿½ï¿½IRï¿½ï¿½ï¿½ï¿½|ï¿½	%ï¿½ï¿½Oï¿½ï¿½ï¿½ï¿½~Eï¿½cï¿½ï¿½ï¿½m=Lï¿½a/ï¿½ï¿½wï¿½ï¿½VCï¿½n"ï¿½ï¿½ï¿½nï¿½ï¿½ï¿½;&ï¿½ï¿½ï¿½ï¿½\gUvkï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Lï¿½ï¿½[R$ï¿½vï¿½ï¿½tFï¿½ï¿½,xï¿½_YðªŠ´ï¿½ï¿½k	Egï¿½ï¿½ï¿½#ï¿½**ï¿½ï¿½ï¿½#;ï¿½qOï¿½ï¿½cEi9É‘'?ï¿½
ï¿½ï¿½MJYï¿½qï¿½ï¿½k{ï¿½3ï¿½4ï¿½Nï¿½6ï¿½î¢Œï¿½*ï¿½9ï¿½ï¿½%ï¿½ï¿½Bï¿½nï¿½ï¿½mï¿½5ï¿½!%[ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½+ï¿½ï¿½å¹8ï¿½ï¿½ï¿½3c"ï¿½ï¿½ï¿½Hï¿½ï¿½deCï¿½ï¿½ï¿½G6H&qLï¿½xBJjï¿½Ix"iï¿½nï¿½|bï¿½FÄŒï¿½mLï¿½ï¿½ï¿½Jeï¿½mï¿½#jDï¿½ï¿½ï¿½]\W<ï¿½bï¿½@R:ï¿½Þ·g ï¿½k*)O8ï¿½TpKYï¿½'1}$	#QUï¿½ï¿½"ï¿½aï¿½ï¿½&ï¿½ß§ï¿½ï¿½&ï¿½E2GNï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½sï¿½+ï¿½ï¿½Jï¿½w/#ï¿½3ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½H#9
ï¿½aBï¿½Ýï¿½WH7ï¿½IZï¿½&Hgï¿½AÉ³ï¿½ï¿½LR\J4ï¿½vï¿½ï¿½JypVqeï¿½ï¿½ï¿½kï¿½ï¿½xuqï¿½ï¿½>ï¿½ï¿½ï¿½i/i<ï¿½ï¿½ï¿½Nï¿½&eï¿½ï¿½ï¿½ï¿½É5tï¿½Åï¿½ gZï¿½ï¿½ï¿½ï¿½ï¿½M?>ï¿½ï¿½ï¿½pGlï¿½ï¿½Ò£Ìœï¿½;ï¿½gï¿½pY8Mï¿½rï¿½+ï¿½ï¿½ï¿½7ï¿½ï¿½ï¿½ï¿½ÈŽ:ï¿½ï¿½KÜ±ï¿½ï¿½E2<#ï¿½Y{=ï¿½$ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½'~Bï¿½7ï¿½ï¿½ï¿½sEï¿½<&ï¿½sBï¿½ï¿½ï¿½ï¿½ï¿½]ï¿½ï¿½!N#i$:ï¿½9 L9	ï¿½i8iï¿½ï¿½ï¿½pï¿½[ï¿½ï¿½= ï¿½Æï¿½×µï¿½]kï¿½ï¿½ï¿½ï¿½3ï¿½FDIHï¿½]ï¿½TKfï¿½{ï¿½<ï¿½ï¿½ÞŸï¿½ï¿½6&Cï¿½ï¿½ï¿½jJI	!;dï¿½ï¿½!"ï¿½Ø”_ï¿½Hï¿½%!'ï¿½Zï¿½ï¿½Iï¿½1ï¿½ï¿½ï¿½ï¿½"dï¿½ï¿½Tï¿½ï¿½%{ï¿½ï¿½jï¿½Dï¿½?ï¿½Þ’cBï¿½`ï¿½rï¿½ï¿½/ï¿½_ï¿½Jï¿½ï¿½ï¿½Jï¿½nZï¿½ï¿½%ï¿½ï¿½5ï¿½ï¿½v3(#ï¿½Nï¿½[ï¿½ï¿½e]yï¿½ï¿½ï¿½TEJï¿½ï¿½ï¿½ï¿½ï¿½ï¿½4ï¿½ï¿½d<ï¿½ï¿½ï¿½ï¿½ï¿½$!KSï¿½}fï¿½ï¿½ï¿½ï¿½''ï¿½ï¿½tï¿½/Jï¿½ï¿½ï¿½F!ï¿½iBï¿½ï¿½u9N9{Rjï¿½ï¿½ ï¿½Gï¿½Pï¿½ï¿½ftï¿½Sï¿½<ï¿½Eï¿½ï¿½yï¿½ï¿½4dï¿½	ï¿½ï¿½ï¿½5ï¿½ï¿½)ï¿½xï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Ï—l{6Jï¿½Å²ï¿½ï¿½Vï¿½U#xKÊï¿½-9i,#n"Ì‘ï¿½ï¿½@Aï¿½ï¿½$kï¿½@È©ï¿½È ï¿½ï¿½ï¿½Jï¿½ï¿½ï¿½Bï¿½ï¿½ï¿½{dï¿½ï¿½ï¿½"Hï¿½ï¿½nBLï¿½|Vï¿½ï¿½ï¿½bï¿½@Æ›ï¿½/'ï¿½ï¿½xï¿½ï¿½;,m;ï¿½Nï¿½`ï¿½ï¿½ï¿½iNï¿½~>"ï¿½ï¿½dï¿½ï¿½ï¿½#8ï¿½ï¿½zï¿½Ü¿ï¿½ï¿½S{5ï¿½ï¿½;ï¿½: ï¿½ï¿½|ï¿½Jï¿½rNï¿½ï¿½DRï¿½[T9ï¿½ï¿½ï¿½;5B6ï¿½;ï¿½y/ï¿½ï¿½<ï¿½ï¿½=m(0ï¿½fï¿½<ï¿½ï¿½ï¿½ï¿½xï¿½ï¿½ï¿½ï¿½ç¾ˆnï¿½ï¿½ï¿½)ï¿½y4[ï¿½fï¿½qï¿½ï¿½ï¿½È·ï¿½ï¿½ï¿½ï¿½Aï¿½ï¿½ï¿½hï¿½'ï¿½ï¿½Fï¿½ï¿½ë€±ï¿½|ï¿½ï¿½ï¿½ï¿½qqI>ï¿½ï¿½@ï¿½ï¿½ï¿½ç¹’ï¿½ï¿½%ï¿½"ï¿½7ï¿½ï¿½ï¿½sï¿½ï¿½ï¿½Qï¿½ï¿½ï¿½ï¿½3'fï¿½ï¿½zb8ï¿½ï¿½/|"ï¿½Ú»Kyï¿½}ï¿½ï¿½qO/^ï¿½%ï¿½ï¿½ï¿½ï¿½{ï¿½ï¿½ï¿½ï¿½Ô•È„kï¿½Îˆï¿½$_@dï¿½{ï¿½ï¿½Xï¿½6ï¿½Wï¿½ï¿½=ï¿½ï¿½ï¿½ï¿½ÉŠï¿½Ûˆï¿½Í³s7ï¿½ï¿½ï¿½ï¿½ï¿½.ï¿½ï¿½ï¿½zï¿½ï¿½mï¿½ï¿½pï¿½pï¿½ï¿½ï¿½<yï¿½ï¿½$yï¿½ï¿½VNï¿½ï¿½ï¿½ï¿½+Hï¿½ï¿½-Wï¿½wï¿½qï¿½ï¿½Cï¿½ï¿½%[bï¿½Cï¿½Yï¿½Ç®ï¿½<
ï¿½Wï¿½ï¿½ï¿½)-Lyï¿½!Wï¿½ï¿½-ï¿½ï¿½5ï¿½v+ï¿½ï¿½ï¿½ï¿½ï¿½Ú­ï¿½vï¿½0ï¿½ï¿½ï¿½O^+ï¿½ï¿½)#ï¿½ï¿½ï¿½ï¿½!ï¿½Û–ï¿½Dï¿½2hï¿½ï¿½) s8ï¿½+Û’+ï¿½ï¿½ï¿½zï¿½ï¿½pï¿½kï¿½ï¿½ï¿½.ï¿½ï¿½ï¿½~Uï¿½ï¿½@ï¿½hlï¿½:ï¿½8dï¿½=ï¿½%ï¿½{;ï¿½ï¿½0ï¿½jï¿½A*ï¿½aï¿½ï¿½Ajï¿½ï¿½ï¿½Úžï¿½]ï¿½H\Uï¿½ï¿½0<tï¿½OPï¿½Q3Kï¿½n>S	aï¿½ï¿½N|_Mï¿½6ï¿½dï¿½ï¿½ï¿½ï¿½hï¿½2rÊ½ï¿½Oï¿½ï¿½ï¿½uï¿½]2ï¿½yï¿½ï¿½Bï¿½Yï¿½ï¿½4ï¿½T6:ï¿½Cï¿½ï¿½ï¿½Ñ¿AZuï¿½jsï¿½4ï¿½4iï¿½ï¿½d@k ï¿½ dnX|kCï¿½lï¿½ï¿½kLqjKK,ï¿½nXï¿½;ï¿½ï¿½)`ï¿½yï¿½ï¿½lsO{ï¿½ï¿½e]nï¿½Ãˆ ï¿½ï¿½ï¿½ï¿½Aï¿½,	ï¿½ï¿½Iï¿½~ï¿½-Qï¿½ï¿½ï¿½ï¿½<Ì¢ï¿½L^BKï¿½Qï¿½QHï¿½ï¿½O[ï¿½ï¿½y4ï¿½;@ï¿½=ï¿½ï¿½\ÄšwD\Jï¿½ï¿½fï¿½ zï¿½ï¿½)ï¿½ï¿½Fï¿½ï¿½%	ï¿½rï¿½Aj(:?X9:
ï¿½5ï¿½iï¿½Vï¿½pï¿½ï¿½ï¿½Dï¿½Xï¿½ï¿½ï¿½ï¿½ï¿½ï¿½:M9C-ï¿½ï¿½ï¿½9ï¿½ï¿½&ï¿½ï¿½@RKmS^ï¿½Ñ¡ï¿½eï¿½ï¿½ï¿½\ï¿½gï¿½\Bï¿½*ï¿½ï¿½ï¿½ï¿½xy×ªï¿½KCbï¿½'ï¿½/Eï¿½wmï¿½IBï¿½ï¿½gï¿½ï¿½ï¿½yï¿½u^ï¿½*ï¿½Ç¡ï¿½ï¿½ï¿½yï¿½iï¿½;Q}ï¿½
'ï¿½rï¿½aï¿½È¢qfM,ï¿½)ï¿½ï¿½ï¿½ï¿½ï¿½f[ï¿½!4r&ï¿½ï¿½ï¿½~ï¿½7ï¿½ï¿½ï¿½ï¿½n{qï¿½-p1{ï¿½_1ï¿½:ï¿½ï¿½\ï¿½GBï¿½ï¿½3"D|ï¿½iï¿½aï¿½6ï¿½tGï¿½=Bï¿½Mqè°§*ï¿½ï¿½}Kï¿½ï¿½ï¿½ï¿½jï¿½ï¿½ï¿½bD'Mï¿½Ð•Æ“Ë—wë»ˆ~uï¿½lN@ï¿½Î€3Gï¿½5ï¿½zï¿½ï¿½ï¿½,kXrï¿½=sï¿½ï¿½Vï¿½ï¿½ï¿½ï¿½ï¿½aï¿½ï¿½m:Dï¿½;pZZUÉ“Kï¿½V/ï¿½ï¿½Ý£ï¿½ï¿½Ûž7ï¿½Jï¿½Cï¿½fGlï¿½Hï¿½]ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Gï¿½ï¿½ï¿½Wï¿½X4Ufï¿½ï¿½ï¿½ï¿½d{ï¿½ï¿½ï¿½:ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Kï¿½ï¿½WNÙï¿½X,ï¿½sï¿½7ï¿½Vï¿½ï¿½ï¿½ï¿½L58Oï¿½Êœï¿½Õš@ï¿½Úƒï¿½ï¿½Sï¿½ï¿½FÛ´1#ï¿½ï¿½M1>ï¿½×¤-e7ï¿½ï¿½6ï¿½ï¿½ï¿½uvOï¿½yï¿½ï¿½ï¿½ï¿½ï¿½3ï¿½ï¿½ï¿½6ï¿½ï¿½ï¿½jï¿½ï¿½G3ï¿½ï¿½)4ï¿½ï¿½ uÖe\ï¿½ï¿½lï¿½ï¿½Qï¿½]<ï¿½åŠ³;eï¿½ï¿½m{Aï¿½ï¿½ï¿½ï¿½ï¿½`]ï¿½ï¿½53ï¿½ï¿½ï¿½Zï¿½i\ï¿½ï¿½Jï¿½:
ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½93tt>Z2Tï¿½bï¿½sï¿½1-/+6ï¿½ï¿½ï¿½	SFmï¿½ï¿½FFÍˆï¿½?ï¿½ï¿½ï¿½<ï¿½ï¿½ï¿½"Iï¿½ï¿½ï¿½Wï¿½Î—É¬ï¿½sï¿½OWï¿½â‹¼ï¿½ï¿½=ï¿½Cï¿½[yï¿½ï¿½qï¿½)u<(v-ï¿½bï¿½ï¿½.ï¿½ï¿½!]ï¿½ï¿½.3|bCï¿½dï¿½dï¿½sXï¿½ï¿½^ï¿½ï¿½ï¿½Eï¿½*ï¿½ï¿½î€³ï¿½ï¿½ï¿½E+tzFï¿½'ï¿½TWï¿½ï¿½P;Eï¿½/D+ï¿½ï¿½/ï¿½(ï¿½ï¿½ï¿½;\~ï¿½ï¿½ï¿½iï¿½Þšï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½!Lï¿½ï¿½â‡¼ï¿½ï¿½ï¿½|xZï¿½ï¿½4ï¿½$ï¿½ï¿½ï¿½4ï¿½lï¿½gï¿½ï¿½}~ï¿½ï¿½ï¿½bï¿½Ö£aï¿½ï¿½j.ï¿½ï¿½<ï¿½ï¿½3ï¿½7ï¿½Bwï¿½"g? `ï¿½ï¿½yï¿½9$,ï¿½Sï¿½ï¿½ï¿½sï¿½E#ï¿½Â­fï¿½ï¿½ANï¿½ï¿½ï¿½P5ï¿½ï¿½Aï¿½|4ï¿½ï¿½ï¿½ï¿½ï¿½6ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½ï¿½Gï¿½ï¿½ï¿½ï¿½ï¿½fï¿½ï¿½Ó¼ï¿½ï¿½ï¿½_)ï¿½Rï¿½ï¿½ï¿½ï¿½ï¿½.×€)Lï¿½ï¿½ï¿½å°¾ï¿½ï¿½Rï¿½ï¿½Lï¿½%ï¿½@ï¿½Q}ï¿½ï¿½Yï¿½x ?ï¿½Mdï¿½ï¿½ï¿½ï¿½ï¿½7ï¿½uEï¿½ï¿½ï¿½wï¿½ï¿½ï¿½ï¿½WMmï¿½bï¿½ï¿½{Lï¿½ï¿½ ï¿½ï¿½ï¿½Oï¿½ï¿½Eï¿½ï¿½4ï¿½Kï¿½ï¿½ï¿½ï¿½cÛŒ(ï¿½

----- [compression.js] -----

import { createGzip } from 'zlib';

readAllFiles(__dirname).then(async () => {
    writeStream.end(); // Finish writing

    await pipeline(
        createReadStream(path.join(__dirname, 'allfiles.txt')),
        createGzip(),
        createWriteStream(path.join(__dirname, 'allfiles.txt.gz'))
    );
});


----- [non-streams.js] -----

import { fileURLToPath } from 'url'
import path from 'path'
import  fs  from 'fs/promises'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)


const folderContent = await fs.readdir(__dirname, { withFileTypes: true })


let content = ''
const readAllFiles = async (dirName) => {
    const folderContent = await fs.readdir(dirName, {withFileTypes: true})
    const dontParse = ['node_modules', '.git', '.next', 'public', '.vercel', '.gitignore', 'package-lock.json', '.env']

    let directories = []
    for (const file of folderContent){
        if (file.isFile() && !dontParse.includes(file.name)){
            const filePath = path.join(dirName, file.name)
            const data = await fs.readFile(filePath, 'utf-8')

            content += `\n----- [${file.name}] -----\n${data}\n\n\n`
        }   
        if(file.isDirectory() && !dontParse.includes(file.name)){
            const filePath = path.join(dirName, file.name)
            directories.push(filePath)
        }
    }

    for(const directory of directories){
        await readAllFiles(directory)
    }


}

const writingFiles = async (content) => {
    await fs.writeFile(path.join(__dirname, 'all-text.txt'), content, 'utf-8')
}

await readAllFiles(__dirname)
await writingFiles(content)

----- [package.json] -----

{
  "name": "llm-api",
  "version": "1.0.0",
  "main": "index.js",
  "type": "module",
  "scripts": {
    "test": "echo \"Error: no test specified\" && exit 1"
  },
  "keywords": [],
  "author": "",
  "license": "ISC",
  "description": "",
  "dependencies": {
    "axios": "^1.11.0",
    "brotli": "^1.3.3",
    "chalk": "^5.4.1",
    "chalk-animation": "^2.0.3",
    "express": "^5.1.0",
    "figlet": "^1.8.2",
    "form-data": "^4.0.4",
    "gradient-string": "^3.0.0",
    "inquirer": "^12.8.2",
    "multer": "^2.0.2",
    "ollama": "^0.5.16",
    "ora": "^8.2.0",
    "readline": "^1.3.0",
    "socket.io": "^4.8.1",
    "socket.io-client": "^4.8.1"
  }
}


----- [readAndCompress.js] -----

import { fileURLToPath } from 'url'
import path from 'path'
import { createWriteStream, createReadStream } from 'fs'
import fs from 'fs/promises'
import { pipeline } from 'stream/promises'
import { createBrotliCompress } from 'zlib'
import sendToServer from './send-to-server.js'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)

const writeStream = createWriteStream(path.join(__dirname, 'codeFiles.txt'), { 
    flags: 'w', 
    encoding: 'utf-8' 
})

// Removing the limit of event listeners
writeStream.setMaxListeners(0)

const readAllFiles = async (dir) => {
    const folderContent = await fs.readdir(dir, {withFileTypes: true})
    const dontParse = ['node_modules', '.git', '.next', 'public', '.vercel', '.gitignore', 'package-lock.json', '.env', 'allfiles.txt', 'allfiles.txt.br', 'llm-backend']

    const folders = []
    for(const file of folderContent){
        if(dontParse.includes(file.name)) continue

        if(file.isFile()){
            const filePath = path.join(dir, file.name)

            // Data will be read here
            const readStream = createReadStream(filePath, { encoding: 'utf-8' })

            // Appending File name
            writeStream.write(`\n\n----- [${file.name}] -----\n\n`)

            // Appending data of file
            await pipeline(readStream, writeStream, {end: false})
        }

        if(file.isDirectory()){
            folders.push(file.name)
        }
    }

    // Targeting sub folder now
    for(const folder of folders){
        const folderPath = path.join(dir, folder)
        await readAllFiles(folderPath)
    }
}

readAllFiles(__dirname).then(async () => {
    writeStream.end()

    await pipeline(
        createReadStream(path.join(__dirname, 'codeFiles.txt')),
        createBrotliCompress(),
        createWriteStream(path.join(__dirname, 'codeFiles.txt.br')),
    );

    await sendToServer('codeFiles.txt.br')
})

export default readAllFiles

----- [send-to-server.js] -----

import path from 'path'
import { createReadStream } from 'fs'
import { fileURLToPath } from 'url'
import FormData from 'form-data'
import axios from 'axios'

const __filename = fileURLToPath(import.meta.url)
const __dirname = path.dirname(__filename)

const sendToServer = async (fileName) => {
    try {
        const formData = new FormData()
        formData.append('codeFile', createReadStream(path.join(__dirname, fileName)))

        console.log(`Uploading ${fileName} to server...`)
        
        const response = await axios.post('http://localhost:8080/api/file', formData, {
            headers: formData.getHeaders(),
            maxContentLength: Infinity,
            maxBodyLength: Infinity
        })

        console.log('Upload successful:', response.data)
        
    } catch (error) {
        console.error('Upload failed:', error.message)
        if (error.response) {
            console.error('Server response:', error.response.data)
        }
    }
}

export default sendToServer